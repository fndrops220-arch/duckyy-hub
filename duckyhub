-- Ducky Hub v1 - ULTRA PREMIUM SLICK EDITION
-- Enhanced glassmorphism with premium animations
-- Created by Ducky Team - discord.gg/duGj8hjB

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local player = Players.LocalPlayer

print("ü¶Ü Ducky Hub v1 ULTRA SLICK loading...")

-- Premium Color Palette (Enhanced)
local COLORS = {
	-- Primary gradient colors
	PRIMARY = Color3.fromRGB(99, 102, 241),
	PRIMARY_LIGHT = Color3.fromRGB(129, 140, 248),
	PRIMARY_DARK = Color3.fromRGB(79, 70, 229),
	PRIMARY_GLOW = Color3.fromRGB(139, 150, 255),
	
	-- Accent colors
	ACCENT = Color3.fromRGB(236, 72, 153),
	ACCENT_LIGHT = Color3.fromRGB(251, 113, 133),
	ACCENT_DARK = Color3.fromRGB(219, 39, 119),
	
	-- Success/Warning/Danger
	SUCCESS = Color3.fromRGB(34, 197, 94),
	SUCCESS_GLOW = Color3.fromRGB(74, 222, 128),
	WARNING = Color3.fromRGB(251, 146, 60),
	DANGER = Color3.fromRGB(239, 68, 68),
	
	-- Backgrounds (glassmorphism)
	BG_GLASS = Color3.fromRGB(15, 23, 42),
	BG_GLASS_LIGHT = Color3.fromRGB(30, 41, 59),
	BG_DARK = Color3.fromRGB(2, 6, 23),
	BG_CARD = Color3.fromRGB(20, 28, 48),
	
	-- Text
	TEXT = Color3.fromRGB(248, 250, 252),
	TEXT_MUTED = Color3.fromRGB(148, 163, 184),
	TEXT_DARK = Color3.fromRGB(100, 116, 139),
	TEXT_DIMMED = Color3.fromRGB(71, 85, 105),
}

-- Enhanced Animation presets
local ANIM = {
	INSTANT = TweenInfo.new(0.15, Enum.EasingStyle.Quad, Enum.EasingDirection.Out),
	FAST = TweenInfo.new(0.25, Enum.EasingStyle.Quad, Enum.EasingDirection.Out),
	SMOOTH = TweenInfo.new(0.4, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut),
	BOUNCE = TweenInfo.new(0.5, Enum.EasingStyle.Back, Enum.EasingDirection.Out),
	ELASTIC = TweenInfo.new(0.7, Enum.EasingStyle.Elastic, Enum.EasingDirection.Out),
	SPRING = TweenInfo.new(0.6, Enum.EasingStyle.Bounce, Enum.EasingDirection.Out),
}

-- HIGH VALUE BRAINROTS with base values
local SECRET_BRAINROTS = {
	["Jolly Jolly Sahur"] = 50000000,
	["Lavadorito Spinito"] = 45000000,
	["Garama and Madundung"] = 50000000,
	["Spaghetti Tualetti"] = 60000000,
	["Festive 67"] = 67000000,
	["Los Spaghettis"] = 75000000,
	["Ginger Gerat"] = 75000000,
	["La Ginger Skolah"] = 75000000,
	["Dragon Cannelloni"] = 250000000,
	["Hydra Dragon Cannelloni"] = 350000000,
	["Reinito Sleighito"] = 140000000,
	["Burguro And Fryuro"] = 150000000,
	["Cooki and Milki"] = 155000000,
	["Capitano Moby"] = 160000000,
	["Cerberus"] = 170000000,
	["La Supreme Combinasion"] = 200000000,
	["Spooky and Pumpky"] = 80000000,
	["La Casa Boo"] = 100000000,
	["Fragrama and Chocrama"] = 100000000,
	["La Secret Combinasion"] = 125000000
}

-- TRAIT MULTIPLIERS
local TRAITS = {
	["Strawberry"] = 8, ["Meowl"] = 7,
	["Fire"] = 6, ["Fireworks"] = 6, ["Nyan"] = 6, ["Brazil"] = 6, 
	["Lightning"] = 6, ["Paint"] = 6, ["Jack O'Lantern Pet"] = 6,
	["Tung Tung Attack"] = 5, ["Indonesian"] = 5, ["Crab Claw"] = 5, 
	["Crab"] = 5, ["Disco"] = 5, ["Rap Concert"] = 5, ["Sombrero"] = 5, 
	["Glitched"] = 5, ["RIP Tombstone"] = 5, ["Santa Hat"] = 5,
	["Tie"] = 4.75, ["Matteo Hat"] = 4.5, ["Witching Hour"] = 4.5,
	["10B"] = 4, ["Bubblegum"] = 4, ["Shark Fin"] = 4, ["Galactic"] = 4, 
	["Explosive"] = 4, ["Extinct"] = 4,
	["Spider"] = 3.5, ["Comet-struck"] = 3.5,
	["Taco"] = 3, ["UFO"] = 3, ["Wet"] = 3, ["Snowy"] = 3,
	["Sleepy"] = 0.5,
}

-- TRAIT EMOJIS
local TRAIT_EMOJIS = {
	["Strawberry"] = "üçì", ["Meowl"] = "üò∫", ["Fire"] = "üî•", ["Fireworks"] = "üéÜ",
	["Nyan"] = "üåà", ["Brazil"] = "üáßüá∑", ["Lightning"] = "‚ö°", ["Paint"] = "üé®",
	["Jack O'Lantern Pet"] = "üéÉ", ["Tung Tung Attack"] = "ü•Å", ["Indonesian"] = "üáÆüá©",
	["Crab Claw"] = "ü¶Ä", ["Crab"] = "ü¶Ä", ["Disco"] = "ü™©", ["Rap Concert"] = "üé§",
	["Sombrero"] = "üé©", ["Glitched"] = "‚ö†Ô∏è", ["RIP Tombstone"] = "ü™¶", ["Santa Hat"] = "üéÖ",
	["Tie"] = "üëî", ["Matteo Hat"] = "üé©", ["Witching Hour"] = "üßô", ["10B"] = "üíØ",
	["Bubblegum"] = "ü´ß", ["Shark Fin"] = "ü¶à", ["Galactic"] = "üåå", ["Explosive"] = "üí•",
	["Extinct"] = "ü¶¥", ["Spider"] = "üï∑Ô∏è", ["Comet-struck"] = "‚òÑÔ∏è", ["Taco"] = "üåÆ",
	["UFO"] = "üõ∏", ["Wet"] = "üíß", ["Snowy"] = "‚ùÑÔ∏è", ["Sleepy"] = "üò¥",
}

-- MUTATION MULTIPLIERS
local MUTATIONS = {
	["Rainbow"] = 10, ["Cursed"] = 9, ["Radioactive"] = 8.5, ["Yin Yang"] = 7.5,
	["Galaxy"] = 7, ["Lava"] = 6, ["Candy"] = 4, ["Bloodrot"] = 2,
	["Diamond"] = 1.5, ["Gold"] = 1.25,
}

-- MUTATION EMOJIS
local MUTATION_EMOJIS = {
	["Rainbow"] = "üåà", ["Cursed"] = "üòà", ["Radioactive"] = "‚ò¢Ô∏è", ["Yin Yang"] = "‚òØÔ∏è",
	["Galaxy"] = "üåå", ["Lava"] = "üåã", ["Candy"] = "üç¨", ["Bloodrot"] = "ü©∏",
	["Diamond"] = "üíé", ["Gold"] = "‚ú®",
}

-- Helper function to format numbers
local function formatMoney(num)
	if num >= 1000000000 then
		return string.format("%.1fB", num / 1000000000)
	elseif num >= 1000000 then
		return string.format("%.1fM", num / 1000000)
	elseif num >= 1000 then
		return string.format("%.1fK", num / 1000)
	else
		return tostring(math.floor(num))
	end
end

-- Create UI
local gui = Instance.new("ScreenGui")
gui.Name = "DuckyHubUltraSlick"
gui.ResetOnSpawn = false
gui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
gui.DisplayOrder = 9999

local success, playerGui = pcall(function()
	return player:WaitForChild("PlayerGui", 5)
end)

if success and playerGui then
	gui.Parent = playerGui
else
	warn("‚ö†Ô∏è Could not find PlayerGui")
	return
end

-- Main container with enhanced glassmorphism (LINE ~155)
local main = Instance.new("Frame", gui)
main.Size = UDim2.fromOffset(720, 480)  -- Changed from 920, 620
main.Position = UDim2.new(0.5, -360, 0.5, -240)  -- Changed from -460, -310
main.BackgroundColor3 = COLORS.BG_GLASS
main.BackgroundTransparency = 0.12
main.BorderSizePixel = 0
main.ClipsDescendants = true
main.Active = true

local mainCorner = Instance.new("UICorner", main)
mainCorner.CornerRadius = UDim.new(0, 28)

-- Layered glass effect
local glassLayer1 = Instance.new("Frame", main)
glassLayer1.Size = UDim2.fromScale(1, 1)
glassLayer1.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
glassLayer1.BackgroundTransparency = 0.94
glassLayer1.BorderSizePixel = 0
glassLayer1.ZIndex = 1

local layer1Corner = Instance.new("UICorner", glassLayer1)
layer1Corner.CornerRadius = UDim.new(0, 28)

local glassLayer2 = Instance.new("Frame", main)
glassLayer2.Size = UDim2.fromScale(1, 0.3)
glassLayer2.Position = UDim2.fromScale(0, 0)
glassLayer2.BackgroundColor3 = COLORS.PRIMARY_GLOW
glassLayer2.BackgroundTransparency = 0.92
glassLayer2.BorderSizePixel = 0
glassLayer2.ZIndex = 1

local layer2Corner = Instance.new("UICorner", glassLayer2)
layer2Corner.CornerRadius = UDim.new(0, 28)

local layer2Gradient = Instance.new("UIGradient", glassLayer2)
layer2Gradient.Color = ColorSequence.new({
	ColorSequenceKeypoint.new(0, COLORS.PRIMARY),
	ColorSequenceKeypoint.new(0.5, COLORS.ACCENT),
	ColorSequenceKeypoint.new(1, COLORS.PRIMARY_DARK)
})
layer2Gradient.Rotation = 45
layer2Gradient.Transparency = NumberSequence.new({
	NumberSequenceKeypoint.new(0, 0),
	NumberSequenceKeypoint.new(1, 1)
})

-- Animated gradient overlay
spawn(function()
	while gui.Parent do
		for i = 45, 405, 0.3 do
			if not gui.Parent then break end
			layer2Gradient.Rotation = i % 360
			task.wait(0.02)
		end
	end
end)

-- Multi-layered glow border
local mainStroke = Instance.new("UIStroke", main)
mainStroke.Color = COLORS.PRIMARY_GLOW
mainStroke.Thickness = 2
mainStroke.Transparency = 0.4
mainStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border

-- Outer glow effect
local outerGlow = Instance.new("ImageLabel", main)
outerGlow.Size = UDim2.fromScale(1.02, 1.02)
outerGlow.Position = UDim2.fromScale(0.5, 0.5)
outerGlow.AnchorPoint = Vector2.new(0.5, 0.5)
outerGlow.BackgroundTransparency = 1
outerGlow.Image = "rbxassetid://5028857084"
outerGlow.ImageColor3 = COLORS.PRIMARY
outerGlow.ImageTransparency = 0.7
outerGlow.ScaleType = Enum.ScaleType.Slice
outerGlow.SliceCenter = Rect.new(24, 24, 276, 276)
outerGlow.ZIndex = 0

-- Animated border glow
spawn(function()
	while gui.Parent do
		TweenService:Create(mainStroke, TweenInfo.new(2.5, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut), {
			Color = COLORS.ACCENT,
			Transparency = 0.15
		}):Play()
		TweenService:Create(outerGlow, TweenInfo.new(2.5, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut), {
			ImageColor3 = COLORS.ACCENT,
			ImageTransparency = 0.5
		}):Play()
		task.wait(2.5)
		if not gui.Parent then break end
		TweenService:Create(mainStroke, TweenInfo.new(2.5, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut), {
			Color = COLORS.PRIMARY_GLOW,
			Transparency = 0.4
		}):Play()
		TweenService:Create(outerGlow, TweenInfo.new(2.5, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut), {
			ImageColor3 = COLORS.PRIMARY,
			ImageTransparency = 0.7
		}):Play()
		task.wait(2.5)
	end
end)

-- Enhanced floating particles
local particlesContainer = Instance.new("Frame", main)
particlesContainer.Size = UDim2.fromScale(1, 1)
particlesContainer.BackgroundTransparency = 1
particlesContainer.ZIndex = 2

for i = 1, 20 do
	local particle = Instance.new("Frame", particlesContainer)
	local size = math.random(3, 10)
	particle.Size = UDim2.fromOffset(size, size)
	particle.Position = UDim2.new(math.random(), 0, math.random(), 0)
	particle.BackgroundColor3 = i % 3 == 0 and COLORS.ACCENT_LIGHT or (i % 3 == 1 and COLORS.PRIMARY_LIGHT or COLORS.SUCCESS_GLOW)
	particle.BackgroundTransparency = math.random(85, 96) / 100
	particle.BorderSizePixel = 0
	
	local particleCorner = Instance.new("UICorner", particle)
	particleCorner.CornerRadius = UDim.new(1, 0)
	
	-- Add glow to some particles
	if i % 4 == 0 then
		local particleGlow = Instance.new("ImageLabel", particle)
		particleGlow.Size = UDim2.fromScale(2, 2)
		particleGlow.Position = UDim2.fromScale(0.5, 0.5)
		particleGlow.AnchorPoint = Vector2.new(0.5, 0.5)
		particleGlow.BackgroundTransparency = 1
		particleGlow.Image = "rbxassetid://5028857084"
		particleGlow.ImageColor3 = particle.BackgroundColor3
		particleGlow.ImageTransparency = 0.8
		particleGlow.ScaleType = Enum.ScaleType.Slice
		particleGlow.SliceCenter = Rect.new(24, 24, 276, 276)
		particleGlow.ZIndex = 1
	end
	
	spawn(function()
		while gui.Parent and particle.Parent do
			local duration = math.random(25, 40)
			TweenService:Create(particle, TweenInfo.new(duration, Enum.EasingStyle.Linear), {
				Position = UDim2.new(math.random(), 0, math.random(), 0)
			}):Play()
			task.wait(duration)
		end
	end)
	
	spawn(function()
		while gui.Parent and particle.Parent do
			local duration = math.random(3, 6)
			TweenService:Create(particle, TweenInfo.new(duration, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut), {
				BackgroundTransparency = math.random(70, 85) / 100,
				Rotation = math.random(-180, 180)
			}):Play()
			task.wait(duration)
			if not gui.Parent then break end
			TweenService:Create(particle, TweenInfo.new(duration, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut), {
				BackgroundTransparency = math.random(90, 98) / 100,
				Rotation = math.random(-180, 180)
			}):Play()
			task.wait(duration)
		end
	end)
end

-- Draggable with smooth motion
local dragging, dragInput, mousePos, framePos

main.InputBegan:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 then
		dragging = true
		mousePos = input.Position
		framePos = main.Position
		
		input.Changed:Connect(function()
			if input.UserInputState == Enum.UserInputState.End then
				dragging = false
			end
		end)
	end
end)

UserInputService.InputChanged:Connect(function(input)
	if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
		local delta = input.Position - mousePos
		TweenService:Create(main, ANIM.INSTANT, {
			Position = UDim2.new(
				framePos.X.Scale, framePos.X.Offset + delta.X,
				framePos.Y.Scale, framePos.Y.Offset + delta.Y
			)
		}):Play()
	end
end)

-- Enhanced Top bar
local topBar = Instance.new("Frame", main)
topBar.Size = UDim2.fromOffset(720, 60)  -- Changed from 920, 75
topBar.BackgroundTransparency = 1
topBar.ZIndex = 3

-- Logo with enhanced styling
local logoContainer = Instance.new("Frame", topBar)
logoContainer.Size = UDim2.fromOffset(180, 60)  -- Changed from 220, 75
logoContainer.Position = UDim2.fromOffset(20, 0)  -- Changed from 25, 0
logoContainer.BackgroundTransparency = 1

local duckIcon = Instance.new("TextLabel", logoContainer)
duckIcon.Size = UDim2.fromOffset(45, 45)  -- Changed from 55, 55
duckIcon.Position = UDim2.fromOffset(0, 8)  -- Changed from 0, 10
duckIcon.BackgroundTransparency = 1
duckIcon.Text = "ü¶Ü"
duckIcon.Font = Enum.Font.GothamBold
duckIcon.TextSize = 32  -- Changed from 40
duckIcon.ZIndex = 4

-- Add glow to duck icon
local duckGlow = Instance.new("ImageLabel", duckIcon)
duckGlow.Size = UDim2.fromScale(1.5, 1.5)
duckGlow.Position = UDim2.fromScale(0.5, 0.5)
duckGlow.AnchorPoint = Vector2.new(0.5, 0.5)
duckGlow.BackgroundTransparency = 1
duckGlow.Image = "rbxassetid://5028857084"
duckGlow.ImageColor3 = COLORS.ACCENT
duckGlow.ImageTransparency = 0.6
duckGlow.ScaleType = Enum.ScaleType.Slice
duckGlow.SliceCenter = Rect.new(24, 24, 276, 276)
duckGlow.ZIndex = 3

spawn(function()
	while gui.Parent do
		TweenService:Create(duckIcon, TweenInfo.new(2, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut), {
			TextSize = 44,
			Rotation = 5
		}):Play()
		TweenService:Create(duckGlow, TweenInfo.new(2, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut), {
			ImageTransparency = 0.4
		}):Play()
		task.wait(2)
		if not gui.Parent then break end
		TweenService:Create(duckIcon, TweenInfo.new(2, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut), {
			TextSize = 40,
			Rotation = -5
		}):Play()
		TweenService:Create(duckGlow, TweenInfo.new(2, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut), {
			ImageTransparency = 0.6
		}):Play()
		task.wait(2)
	end
end)

local titleLabel = Instance.new("TextLabel", logoContainer)
titleLabel.Size = UDim2.fromOffset(130, 28)  -- Changed from 155, 32
titleLabel.Position = UDim2.fromOffset(50, 10)  -- Changed from 60, 12
titleLabel.BackgroundTransparency = 1
titleLabel.Text = "DUCKY HUB"
titleLabel.Font = Enum.Font.GothamBold
titleLabel.TextSize = 20  -- Changed from 24
titleLabel.TextColor3 = COLORS.TEXT
titleLabel.TextXAlignment = Enum.TextXAlignment.Left
titleLabel.ZIndex = 4

-- Add gradient to title
local titleGradient = Instance.new("UIGradient", titleLabel)
titleGradient.Color = ColorSequence.new({
	ColorSequenceKeypoint.new(0, COLORS.TEXT),
	ColorSequenceKeypoint.new(1, COLORS.PRIMARY_LIGHT)
})
titleGradient.Rotation = 90

local subtitle = Instance.new("TextLabel", logoContainer)
subtitle.Size = UDim2.fromOffset(130, 18)  -- Changed from 155, 22
subtitle.Position = UDim2.fromOffset(50, 38)  -- Changed from 60, 45
subtitle.BackgroundTransparency = 1
subtitle.Text = "discord.gg/duGj8hjB"
subtitle.Font = Enum.Font.Gotham
subtitle.TextSize = 10  -- Changed from 11
subtitle.TextColor3 = COLORS.TEXT_MUTED
subtitle.TextXAlignment = Enum.TextXAlignment.Left
subtitle.ZIndex = 4

-- Enhanced version badge
local versionBadge = Instance.new("Frame", topBar)
versionBadge.Size = UDim2.fromOffset(80, 28)  -- Changed from 90, 32
versionBadge.Position = UDim2.fromOffset(210, 16)  -- Changed from 255, 22
versionBadge.BackgroundColor3 = COLORS.PRIMARY
versionBadge.BackgroundTransparency = 0.1
versionBadge.BorderSizePixel = 0
versionBadge.ZIndex = 4

local badgeCorner = Instance.new("UICorner", versionBadge)
badgeCorner.CornerRadius = UDim.new(0, 8)  -- Changed from 10

local badgeCorner = Instance.new("UICorner", versionBadge)
badgeCorner.CornerRadius = UDim.new(0, 10)

local badgeStroke = Instance.new("UIStroke", versionBadge)
badgeStroke.Color = COLORS.ACCENT
badgeStroke.Thickness = 1.5
badgeStroke.Transparency = 0.4

local badgeGradient = Instance.new("UIGradient", versionBadge)
badgeGradient.Color = ColorSequence.new({
	ColorSequenceKeypoint.new(0, COLORS.PRIMARY),
	ColorSequenceKeypoint.new(1, COLORS.PRIMARY_DARK)
})
badgeGradient.Rotation = 135

local versionText = Instance.new("TextLabel", versionBadge)
versionText.Size = UDim2.fromScale(1, 1)
versionText.BackgroundTransparency = 1
versionText.Text = "V1"
versionText.Font = Enum.Font.GothamBold
versionText.TextSize = 11
versionText.TextColor3 = COLORS.TEXT
versionText.ZIndex = 5

-- Animated sparkle effect
local sparkle = Instance.new("Frame", versionBadge)
sparkle.Size = UDim2.fromOffset(3, 32)
sparkle.Position = UDim2.fromOffset(-10, 0)
sparkle.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
sparkle.BackgroundTransparency = 0.3
sparkle.BorderSizePixel = 0
sparkle.ZIndex = 6

spawn(function()
	while gui.Parent and versionBadge.Parent do
		TweenService:Create(sparkle, TweenInfo.new(1.5, Enum.EasingStyle.Linear), {
			Position = UDim2.fromOffset(100, 0)
		}):Play()
		task.wait(3)
		if not gui.Parent then break end
		sparkle.Position = UDim2.fromOffset(-10, 0)
	end
end)

-- Premium close button
local closeBtn = Instance.new("TextButton", topBar)
closeBtn.Size = UDim2.fromOffset(38, 38)  -- Changed from 45, 45
closeBtn.Position = UDim2.fromOffset(672, 11)  -- Changed from 860, 15
closeBtn.BackgroundColor3 = COLORS.DANGER
closeBtn.BackgroundTransparency = 0.8
closeBtn.Text = "‚úï"
closeBtn.Font = Enum.Font.GothamBold
closeBtn.TextSize = 18  -- Changed from 22
closeBtn.TextColor3 = COLORS.TEXT
closeBtn.BorderSizePixel = 0
closeBtn.AutoButtonColor = false
closeBtn.ZIndex = 4

local closeCorner = Instance.new("UICorner", closeBtn)
closeCorner.CornerRadius = UDim.new(0, 12)  -- Changed from 14

local closeCorner = Instance.new("UICorner", closeBtn)
closeCorner.CornerRadius = UDim.new(0, 14)

local closeStroke = Instance.new("UIStroke", closeBtn)
closeStroke.Color = COLORS.DANGER
closeStroke.Thickness = 2
closeStroke.Transparency = 0.5

closeBtn.MouseEnter:Connect(function()
	TweenService:Create(closeBtn, ANIM.SMOOTH, {
		BackgroundTransparency = 0,
		Size = UDim2.fromOffset(42, 42),  -- Changed from 50, 50
		Rotation = 90
	}):Play()
	TweenService:Create(closeStroke, ANIM.SMOOTH, {Transparency = 0, Thickness = 2.5}):Play()
end)

closeBtn.MouseLeave:Connect(function()
	TweenService:Create(closeBtn, ANIM.SMOOTH, {
		BackgroundTransparency = 0.8,
		Size = UDim2.fromOffset(38, 38),  -- Changed from 45, 45
		Rotation = 0
	}):Play()
	TweenService:Create(closeStroke, ANIM.SMOOTH, {Transparency = 0.5, Thickness = 2}):Play()
end)

closeBtn.MouseButton1Click:Connect(function()
	TweenService:Create(main, TweenInfo.new(0.4, Enum.EasingStyle.Quad, Enum.EasingDirection.In), {
		BackgroundTransparency = 1,
		Size = UDim2.fromOffset(620, 420),  -- Changed from 800, 550
		Position = UDim2.new(0.5, -310, 0.5, -210)  -- Changed from -400, -275
	}):Play()
	
	for _, child in pairs(main:GetDescendants()) do
		pcall(function()
			if child:IsA("TextLabel") or child:IsA("TextButton") then
				TweenService:Create(child, TweenInfo.new(0.4), {
					TextTransparency = 1,
					BackgroundTransparency = 1
				}):Play()
			elseif child:IsA("Frame") or child:IsA("ScrollingFrame") or child:IsA("ImageLabel") then
				TweenService:Create(child, TweenInfo.new(0.4), {
					BackgroundTransparency = 1,
					ImageTransparency = 1
				}):Play()
			elseif child:IsA("UIStroke") then
				TweenService:Create(child, TweenInfo.new(0.4), {Transparency = 1}):Play()
			end
		end)
	end
	
	task.wait(0.4)
	gui:Destroy()
	print("üëã Ducky Hub closed")
end)

-- Premium divider with gradient
local divider = Instance.new("Frame", main)
divider.Size = UDim2.fromOffset(690, 2)  -- Changed from 880, 2
divider.Position = UDim2.fromOffset(15, 65)  -- Changed from 20, 80
divider.BackgroundColor3 = COLORS.PRIMARY
divider.BackgroundTransparency = 0.5
divider.BorderSizePixel = 0
divider.ZIndex = 3

local dividerCorner = Instance.new("UICorner", divider)
dividerCorner.CornerRadius = UDim.new(1, 0)

local dividerGradient = Instance.new("UIGradient", divider)
dividerGradient.Color = ColorSequence.new({
	ColorSequenceKeypoint.new(0, COLORS.PRIMARY),
	ColorSequenceKeypoint.new(0.5, COLORS.ACCENT),
	ColorSequenceKeypoint.new(1, COLORS.PRIMARY)
})
dividerGradient.Transparency = NumberSequence.new({
	NumberSequenceKeypoint.new(0, 1),
	NumberSequenceKeypoint.new(0.5, 0),
	NumberSequenceKeypoint.new(1, 1)
})

-- Enhanced Sidebar
local sidebar = Instance.new("Frame", main)
sidebar.Size = UDim2.fromOffset(180, 400)  -- Changed from 230, 520
sidebar.Position = UDim2.fromOffset(12, 72)  -- Changed from 15, 90
sidebar.BackgroundColor3 = COLORS.BG_CARD
sidebar.BackgroundTransparency = 0.3
sidebar.BorderSizePixel = 0
sidebar.ZIndex = 3

local sidebarCorner = Instance.new("UICorner", sidebar)
sidebarCorner.CornerRadius = UDim.new(0, 20)

local sidebarStroke = Instance.new("UIStroke", sidebar)
sidebarStroke.Color = COLORS.PRIMARY
sidebarStroke.Thickness = 1.5
sidebarStroke.Transparency = 0.65

-- Add subtle inner glow to sidebar
local sidebarGlow = Instance.new("Frame", sidebar)
sidebarGlow.Size = UDim2.fromScale(1, 0.15)
sidebarGlow.Position = UDim2.fromScale(0, 0)
sidebarGlow.BackgroundColor3 = COLORS.PRIMARY_GLOW
sidebarGlow.BackgroundTransparency = 0.85
sidebarGlow.BorderSizePixel = 0
sidebarGlow.ZIndex = 3

local sidebarGlowCorner = Instance.new("UICorner", sidebarGlow)
sidebarGlowCorner.CornerRadius = UDim.new(0, 20)

local sidebarGlowGradient = Instance.new("UIGradient", sidebarGlow)
sidebarGlowGradient.Transparency = NumberSequence.new({
	NumberSequenceKeypoint.new(0, 0),
	NumberSequenceKeypoint.new(1, 1)
})
sidebarGlowGradient.Rotation = 90

local navContainer = Instance.new("Frame", sidebar)
navContainer.Size = UDim2.fromOffset(165, 380)  -- Changed from 210, 490
navContainer.Position = UDim2.fromOffset(8, 10)  -- Changed from 10, 15
navContainer.BackgroundTransparency = 1

--- Enhanced Content area
local contentArea = Instance.new("Frame", main)
contentArea.Size = UDim2.fromOffset(515, 400)  -- Changed from 655, 520
contentArea.Position = UDim2.fromOffset(200, 72)  -- Changed from 255, 90
contentArea.BackgroundTransparency = 1
contentArea.ZIndex = 3
contentArea.ClipsDescendants = true

-- Create enhanced section
local function createSection(name, emoji)
	local section = Instance.new("Frame", contentArea)
	section.Name = name .. "Section"
	section.Size = UDim2.fromOffset(515, 400)  -- Changed from 655, 520
	section.BackgroundTransparency = 1
	section.Visible = false
	section.ZIndex = 4
	
	local header = Instance.new("Frame", section)
	header.Size = UDim2.fromOffset(500, 55)  -- Changed from 635, 70
	header.Position = UDim2.fromOffset(8, 0)  -- Changed from 10, 0
	header.BackgroundColor3 = COLORS.BG_CARD
	header.BackgroundTransparency = 0.4
	header.BorderSizePixel = 0
	
	local headerCorner = Instance.new("UICorner", header)
	headerCorner.CornerRadius = UDim.new(0, 14)  -- Changed from 18
	
	local headerStroke = Instance.new("UIStroke", header)
	headerStroke.Color = COLORS.PRIMARY
	headerStroke.Thickness = 1.5
	headerStroke.Transparency = 0.65
	
	-- Header gradient overlay
	local headerGradient = Instance.new("Frame", header)
	headerGradient.Size = UDim2.fromScale(1, 0.5)
	headerGradient.BackgroundColor3 = COLORS.PRIMARY_GLOW
	headerGradient.BackgroundTransparency = 0.9
	headerGradient.BorderSizePixel = 0
	
	local headerGradientCorner = Instance.new("UICorner", headerGradient)
	headerGradientCorner.CornerRadius = UDim.new(0, 14)  -- Changed from 18
	
	local headerGradientGrad = Instance.new("UIGradient", headerGradient)
	headerGradientGrad.Transparency = NumberSequence.new({
		NumberSequenceKeypoint.new(0, 0),
		NumberSequenceKeypoint.new(1, 1)
	})
	headerGradientGrad.Rotation = 90
	
	local headerIcon = Instance.new("TextLabel", header)
	headerIcon.Size = UDim2.fromOffset(36, 36)  -- Changed from 45, 45
	headerIcon.Position = UDim2.fromOffset(12, 10)  -- Changed from 18, 12
	headerIcon.BackgroundTransparency = 1
	headerIcon.Text = emoji
	headerIcon.Font = Enum.Font.GothamBold
	headerIcon.TextSize = 26  -- Changed from 32
	headerIcon.TextColor3 = COLORS.ACCENT_LIGHT
	headerIcon.ZIndex = 2
	
	local headerTitle = Instance.new("TextLabel", header)
	headerTitle.Size = UDim2.fromOffset(440, 55)  -- Changed from 550, 70
	headerTitle.Position = UDim2.fromOffset(60, 0)  -- Changed from 75, 0
	headerTitle.BackgroundTransparency = 1
	headerTitle.Text = name
	headerTitle.Font = Enum.Font.GothamBold
	headerTitle.TextSize = 18  -- Changed from 22
	headerTitle.TextColor3 = COLORS.TEXT
	headerTitle.TextXAlignment = Enum.TextXAlignment.Left
	headerTitle.ZIndex = 2
	
	local content = Instance.new("ScrollingFrame", section)
	content.Name = "Content"
	content.Size = UDim2.fromOffset(500, 335)  -- Changed from 635, 435
	content.Position = UDim2.fromOffset(8, 62)  -- Changed from 10, 80
	content.BackgroundTransparency = 1
	content.BorderSizePixel = 0
	content.ScrollBarThickness = 4  -- Changed from 5
	content.ScrollBarImageColor3 = COLORS.PRIMARY
	content.ScrollBarImageTransparency = 0.4
	content.CanvasSize = UDim2.fromOffset(500, 0)  -- Changed from 635, 0
	content.AutomaticCanvasSize = Enum.AutomaticSize.Y
	
	local layout = Instance.new("UIListLayout", content)
	layout.SortOrder = Enum.SortOrder.LayoutOrder
	layout.Padding = UDim.new(0, 10)  -- Changed from 12
	
	local padding = Instance.new("UIPadding", content)
	padding.PaddingTop = UDim.new(0, 6)  -- Changed from 8
	padding.PaddingBottom = UDim.new(0, 6)  -- Changed from 8
	
	return section, content
end

local espSection, espContent = createSection("ESP CONTROLS", "üëÅÔ∏è")
local worldSection, worldContent = createSection("WORLD", "üåç")
local stealSection, stealContent = createSection("INSTANT STEAL", "‚ö°")
local settingsSection, settingsContent = createSection("SETTINGS", "‚öôÔ∏è")

-- Create premium nav button
local currentNavButton = nil
local currentSection = nil

local function createNavButton(text, emoji, order, section)
	local btn = Instance.new("TextButton", navContainer)
	btn.Size = UDim2.fromOffset(165, 50)  -- Changed from 210, 62
	btn.Position = UDim2.fromOffset(0, (order - 1) * 58)  -- Changed from 72
	btn.BackgroundColor3 = COLORS.BG_CARD
	btn.BackgroundTransparency = 0.6
	btn.Text = ""
	btn.BorderSizePixel = 0
	btn.AutoButtonColor = false
	btn.ZIndex = 4
	
	local corner = Instance.new("UICorner", btn)
	corner.CornerRadius = UDim.new(0, 13)  -- Changed from 16
	
	local stroke = Instance.new("UIStroke", btn)
	stroke.Color = COLORS.PRIMARY
	stroke.Thickness = 1.5
	stroke.Transparency = 0.75
	
	-- Hover glow effect
	local hoverGlow = Instance.new("Frame", btn)
	hoverGlow.Size = UDim2.fromScale(1, 1)
	hoverGlow.BackgroundColor3 = COLORS.PRIMARY_GLOW
	hoverGlow.BackgroundTransparency = 1
	hoverGlow.BorderSizePixel = 0
	hoverGlow.ZIndex = 4
	
	local hoverCorner = Instance.new("UICorner", hoverGlow)
	hoverCorner.CornerRadius = UDim.new(0, 13)  -- Changed from 16
	
	local iconLabel = Instance.new("TextLabel", btn)
	iconLabel.Size = UDim2.fromOffset(36, 36)  -- Changed from 45, 45
	iconLabel.Position = UDim2.fromOffset(10, 7)  -- Changed from 14, 8
	iconLabel.BackgroundTransparency = 1
	iconLabel.Text = emoji
	iconLabel.Font = Enum.Font.GothamBold
	iconLabel.TextSize = 22  -- Changed from 28
	iconLabel.TextColor3 = COLORS.TEXT_MUTED
	iconLabel.ZIndex = 5
	
	local textLabel = Instance.new("TextLabel", btn)
	textLabel.Size = UDim2.fromOffset(110, 50)  -- Changed from 140, 62
	textLabel.Position = UDim2.fromOffset(52, 0)  -- Changed from 64, 0
	textLabel.BackgroundTransparency = 1
	textLabel.Text = text
	textLabel.Font = Enum.Font.GothamBold
	textLabel.TextSize = 13  -- Changed from 15
	textLabel.TextColor3 = COLORS.TEXT_MUTED
	textLabel.TextXAlignment = Enum.TextXAlignment.Left
	textLabel.ZIndex = 5
	
	local indicator = Instance.new("Frame", btn)
	indicator.Size = UDim2.fromOffset(3, 0)  -- Changed from 4, 0
	indicator.Position = UDim2.fromOffset(0, 25)  -- Changed from 31
	indicator.AnchorPoint = Vector2.new(0, 0.5)
	indicator.BackgroundColor3 = COLORS.ACCENT
	indicator.BorderSizePixel = 0
	indicator.ZIndex = 6
	
	local indicatorCorner = Instance.new("UICorner", indicator)
	indicatorCorner.CornerRadius = UDim.new(0, 2)
	
	btn.MouseEnter:Connect(function()
		if btn ~= currentNavButton then
			TweenService:Create(btn, ANIM.SMOOTH, {BackgroundTransparency = 0.35}):Play()
			TweenService:Create(stroke, ANIM.SMOOTH, {Transparency = 0.4}):Play()
			TweenService:Create(hoverGlow, ANIM.SMOOTH, {BackgroundTransparency = 0.85}):Play()
			TweenService:Create(iconLabel, ANIM.BOUNCE, {TextColor3 = COLORS.PRIMARY_LIGHT, TextSize = 26}):Play()  -- Changed from 32
			TweenService:Create(textLabel, ANIM.SMOOTH, {TextColor3 = COLORS.TEXT}):Play()
			TweenService:Create(indicator, ANIM.ELASTIC, {Size = UDim2.fromOffset(3, 32)}):Play()  -- Changed from 4, 40
		end
	end)
	
	btn.MouseLeave:Connect(function()
		if btn ~= currentNavButton then
			TweenService:Create(btn, ANIM.SMOOTH, {BackgroundTransparency = 0.6}):Play()
			TweenService:Create(stroke, ANIM.SMOOTH, {Transparency = 0.75}):Play()
			TweenService:Create(hoverGlow, ANIM.SMOOTH, {BackgroundTransparency = 1}):Play()
			TweenService:Create(iconLabel, ANIM.BOUNCE, {TextColor3 = COLORS.TEXT_MUTED, TextSize = 22}):Play()  -- Changed from 28
			TweenService:Create(textLabel, ANIM.SMOOTH, {TextColor3 = COLORS.TEXT_MUTED}):Play()
			TweenService:Create(indicator, ANIM.SMOOTH, {Size = UDim2.fromOffset(3, 0)}):Play()  -- Changed from 4, 0
		end
	end)
	
	btn.MouseButton1Click:Connect(function()
		if currentNavButton == btn then return end
		
		-- Deactivate previous button
		if currentNavButton then
			local oldIcon = currentNavButton:FindFirstChild("TextLabel")
			local oldText = nil
			for _, child in pairs(currentNavButton:GetChildren()) do
				if child:IsA("TextLabel") and child ~= oldIcon then
					oldText = child
					break
				end
			end
			local oldIndicator = currentNavButton:FindFirstChild("Frame")
			local oldStroke = currentNavButton:FindFirstChild("UIStroke")
			local oldHoverGlow = nil
			for _, child in pairs(currentNavButton:GetChildren()) do
				if child:IsA("Frame") and child.Name ~= "Frame" then
					oldHoverGlow = child
					break
				end
			end
			
			TweenService:Create(currentNavButton, ANIM.SMOOTH, {BackgroundTransparency = 0.6}):Play()
			if oldStroke then
				TweenService:Create(oldStroke, ANIM.SMOOTH, {Transparency = 0.75, Color = COLORS.PRIMARY}):Play()
			end
			if oldHoverGlow then
				TweenService:Create(oldHoverGlow, ANIM.SMOOTH, {BackgroundTransparency = 1}):Play()
			end
			if oldIcon then
				TweenService:Create(oldIcon, ANIM.SMOOTH, {TextColor3 = COLORS.TEXT_MUTED, TextSize = 22}):Play()  -- Changed from 28
			end
			if oldText then
				TweenService:Create(oldText, ANIM.SMOOTH, {TextColor3 = COLORS.TEXT_MUTED}):Play()
			end
			if oldIndicator then
				TweenService:Create(oldIndicator, ANIM.SMOOTH, {Size = UDim2.fromOffset(3, 0)}):Play()  -- Changed from 4, 0
			end
		end
		
		-- Hide previous section
		if currentSection and currentSection ~= section then
			currentSection.Visible = false
		end
		
		-- Activate new button
		TweenService:Create(btn, ANIM.SMOOTH, {BackgroundTransparency = 0.15}):Play()
		TweenService:Create(stroke, ANIM.SMOOTH, {Transparency = 0.25, Color = COLORS.ACCENT}):Play()
		TweenService:Create(hoverGlow, ANIM.SMOOTH, {BackgroundTransparency = 0.7}):Play()
		TweenService:Create(iconLabel, ANIM.ELASTIC, {TextColor3 = COLORS.ACCENT_LIGHT, TextSize = 27}):Play()  -- Changed from 34
		TweenService:Create(textLabel, ANIM.SMOOTH, {TextColor3 = COLORS.TEXT}):Play()
		TweenService:Create(indicator, ANIM.ELASTIC, {Size = UDim2.fromOffset(4, 50), BackgroundColor3 = COLORS.ACCENT}):Play()  -- Changed from 5, 62
		
		section.Visible = true
		currentNavButton = btn
		currentSection = section
	end)
	
	return btn
end

local espNavBtn = createNavButton("ESP", "üëÅÔ∏è", 1, espSection)
local worldNavBtn = createNavButton("World", "üåç", 2, worldSection)
local stealNavBtn = createNavButton("Steal", "‚ö°", 3, stealSection)
local settingsNavBtn = createNavButton("Settings", "‚öôÔ∏è", 4, settingsSection)

-- Premium toggle with enhanced visuals
local function createToggle(text, description, parent)
	local container = Instance.new("Frame", parent)
	container.Size = UDim2.fromOffset(485, description and 75 or 55)  -- Changed from 615, 95/70
	container.BackgroundColor3 = COLORS.BG_CARD
	container.BackgroundTransparency = 0.4
	container.BorderSizePixel = 0
	
	local corner = Instance.new("UICorner", container)
	corner.CornerRadius = UDim.new(0, 13)  -- Changed from 16
	
	local stroke = Instance.new("UIStroke", container)
	stroke.Color = COLORS.PRIMARY
	stroke.Thickness = 1.5
	stroke.Transparency = 0.75
	
	-- Subtle top gradient
	local topGradient = Instance.new("Frame", container)
	topGradient.Size = UDim2.fromScale(1, 0.4)
	topGradient.BackgroundColor3 = COLORS.PRIMARY_GLOW
	topGradient.BackgroundTransparency = 0.92
	topGradient.BorderSizePixel = 0
	
	local topGradientCorner = Instance.new("UICorner", topGradient)
	topGradientCorner.CornerRadius = UDim.new(0, 13)  -- Changed from 16
	
	local topGradGrad = Instance.new("UIGradient", topGradient)
	topGradGrad.Transparency = NumberSequence.new({
		NumberSequenceKeypoint.new(0, 0),
		NumberSequenceKeypoint.new(1, 1)
	})
	topGradGrad.Rotation = 90
	
	local label = Instance.new("TextLabel", container)
	label.Size = UDim2.fromOffset(370, 22)  -- Changed from 480, 24
	label.Position = UDim2.fromOffset(15, description and 14 or 17)  -- Changed from 20, 18/23
	label.BackgroundTransparency = 1
	label.Text = text
	label.Font = Enum.Font.GothamBold
	label.TextSize = 14  -- Changed from 16
	label.TextColor3 = COLORS.TEXT
	label.TextXAlignment = Enum.TextXAlignment.Left
	label.ZIndex = 2
	
	if description then
		local desc = Instance.new("TextLabel", container)
		desc.Size = UDim2.fromOffset(370, 32)  -- Changed from 480, 40
		desc.Position = UDim2.fromOffset(15, 38)  -- Changed from 20, 48
		desc.BackgroundTransparency = 1
		desc.Text = description
		desc.Font = Enum.Font.Gotham
		desc.TextSize = 11  -- Changed from 13
		desc.TextColor3 = COLORS.TEXT_MUTED
		desc.TextXAlignment = Enum.TextXAlignment.Left
		desc.TextWrapped = true
		desc.ZIndex = 2
	end
	
	local toggleBg = Instance.new("Frame", container)
	toggleBg.Size = UDim2.fromOffset(54, 28)  -- Changed from 64, 34
	toggleBg.Position = UDim2.fromOffset(420, description and 24 or 14)  -- Changed from 535, 31/18
	toggleBg.BackgroundColor3 = COLORS.BG_GLASS
	toggleBg.BorderSizePixel = 0
	toggleBg.ZIndex = 2
	
	local toggleCorner = Instance.new("UICorner", toggleBg)
	toggleCorner.CornerRadius = UDim.new(1, 0)
	
	local toggleStroke = Instance.new("UIStroke", toggleBg)
	toggleStroke.Color = COLORS.TEXT_DARK
	toggleStroke.Thickness = 2
	toggleStroke.Transparency = 0.5
	
	local toggleCircle = Instance.new("Frame", toggleBg)
	toggleCircle.Size = UDim2.fromOffset(22, 22)  -- Changed from 28, 28
	toggleCircle.Position = UDim2.fromOffset(3, 3)
	toggleCircle.BackgroundColor3 = COLORS.TEXT_MUTED
	toggleCircle.BorderSizePixel = 0
	toggleCircle.ZIndex = 3
	
	local circleCorner = Instance.new("UICorner", toggleCircle)
	circleCorner.CornerRadius = UDim.new(1, 0)
	
	-- Add glow to circle when active
	local circleGlow = Instance.new("ImageLabel", toggleCircle)
	circleGlow.Size = UDim2.fromScale(1.8, 1.8)
	circleGlow.Position = UDim2.fromScale(0.5, 0.5)
	circleGlow.AnchorPoint = Vector2.new(0.5, 0.5)
	circleGlow.BackgroundTransparency = 1
	circleGlow.Image = "rbxassetid://5028857084"
	circleGlow.ImageColor3 = COLORS.PRIMARY
	circleGlow.ImageTransparency = 1
	circleGlow.ScaleType = Enum.ScaleType.Slice
	circleGlow.SliceCenter = Rect.new(24, 24, 276, 276)
	circleGlow.ZIndex = 2
	
	local toggleBtn = Instance.new("TextButton", container)
	toggleBtn.Size = container.Size
	toggleBtn.BackgroundTransparency = 1
	toggleBtn.Text = ""
	toggleBtn.AutoButtonColor = false
	toggleBtn.ZIndex = 4
	
	local isOn = false
	
	toggleBtn.MouseEnter:Connect(function()
		TweenService:Create(container, ANIM.SMOOTH, {BackgroundTransparency = 0.25}):Play()
		TweenService:Create(stroke, ANIM.SMOOTH, {Transparency = 0.5}):Play()
		if not isOn then
			TweenService:Create(toggleStroke, ANIM.SMOOTH, {Thickness = 2.5}):Play()
		end
	end)
	
	toggleBtn.MouseLeave:Connect(function()
		if not isOn then
			TweenService:Create(container, ANIM.SMOOTH, {BackgroundTransparency = 0.4}):Play()
			TweenService:Create(stroke, ANIM.SMOOTH, {Transparency = 0.75}):Play()
			TweenService:Create(toggleStroke, ANIM.SMOOTH, {Thickness = 2}):Play()
		end
	end)
	
	local function toggle()
		isOn = not isOn
		
		if isOn then
			TweenService:Create(toggleBg, ANIM.SMOOTH, {BackgroundColor3 = COLORS.PRIMARY}):Play()
			TweenService:Create(toggleStroke, ANIM.SMOOTH, {Color = COLORS.PRIMARY_LIGHT, Transparency = 0.2, Thickness = 2.5}):Play()
			TweenService:Create(toggleCircle, ANIM.ELASTIC, {Position = UDim2.fromOffset(29, 3), BackgroundColor3 = COLORS.TEXT}):Play()  -- Changed from 33, 3
			TweenService:Create(circleGlow, ANIM.SMOOTH, {ImageTransparency = 0.4}):Play()
			TweenService:Create(container, ANIM.SMOOTH, {BackgroundTransparency = 0.25}):Play()
			TweenService:Create(stroke, ANIM.SMOOTH, {Color = COLORS.PRIMARY, Transparency = 0.4}):Play()
		else
			TweenService:Create(toggleBg, ANIM.SMOOTH, {BackgroundColor3 = COLORS.BG_GLASS}):Play()
			TweenService:Create(toggleStroke, ANIM.SMOOTH, {Color = COLORS.TEXT_DARK, Transparency = 0.5, Thickness = 2}):Play()
			TweenService:Create(toggleCircle, ANIM.ELASTIC, {Position = UDim2.fromOffset(3, 3), BackgroundColor3 = COLORS.TEXT_MUTED}):Play()
			TweenService:Create(circleGlow, ANIM.SMOOTH, {ImageTransparency = 1}):Play()
			TweenService:Create(container, ANIM.SMOOTH, {BackgroundTransparency = 0.4}):Play()
			TweenService:Create(stroke, ANIM.SMOOTH, {Color = COLORS.PRIMARY, Transparency = 0.75}):Play()
		end
		
		return isOn
	end
	
	toggleBtn.MouseButton1Click:Connect(function()
		-- Haptic feedback animation
		TweenService:Create(toggleCircle, TweenInfo.new(0.1, Enum.EasingStyle.Quad), {Size = UDim2.fromOffset(20, 20)}):Play()  -- Changed from 24, 24
		task.wait(0.1)
		TweenService:Create(toggleCircle, TweenInfo.new(0.1, Enum.EasingStyle.Quad), {Size = UDim2.fromOffset(22, 22)}):Play()  -- Changed from 28, 28
	end)
	
	return toggleBtn, function() return isOn end, toggle
end

--======================
-- ESP LOGIC (preserved from original)
--======================
local playerESP = false
local playerESPObjects = {}

local function removePlayerESP(char)
	if not char then return end
	if char:FindFirstChild("DuckyPlayerESP") then
		char.DuckyPlayerESP:Destroy()
	end
	local head = char:FindFirstChild("Head")
	if head and head:FindFirstChild("DuckyPlayerBillboard") then
		head.DuckyPlayerBillboard:Destroy()
	end
end

local function addPlayerESP(char, plr)
	if not char or not char.Parent then return end
	removePlayerESP(char)
	
	local hrp = char:FindFirstChild("HumanoidRootPart")
	local head = char:FindFirstChild("Head")
	local humanoid = char:FindFirstChildOfClass("Humanoid")
	
	if not hrp or not head or not humanoid then return end

	local h = Instance.new("Highlight")
	h.Name = "DuckyPlayerESP"
	h.Parent = char
	h.FillTransparency = 0.6
	h.OutlineTransparency = 0.1
	h.FillColor = COLORS.ACCENT
	h.OutlineColor = COLORS.PRIMARY
	h.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
	
	local billboard = Instance.new("BillboardGui")
	billboard.Name = "DuckyPlayerBillboard"
	billboard.Parent = head
	billboard.Adornee = head
	billboard.Size = UDim2.fromOffset(140, 50)
	billboard.StudsOffset = Vector3.new(0, 3, 0)
	billboard.AlwaysOnTop = true
	billboard.MaxDistance = 1000
	billboard.ResetOnSpawn = false
	
	local container = Instance.new("Frame", billboard)
	container.Size = UDim2.fromScale(1, 1)
	container.BackgroundColor3 = COLORS.BG_GLASS
	container.BackgroundTransparency = 0.25
	container.BorderSizePixel = 0
	Instance.new("UICorner", container).CornerRadius = UDim.new(0, 10)
	
	local stroke = Instance.new("UIStroke", container)
	stroke.Color = COLORS.PRIMARY
	stroke.Thickness = 2
	stroke.Transparency = 0.3
	
	local username = Instance.new("TextLabel", container)
	username.Size = UDim2.new(1, -10, 0, 22)
	username.Position = UDim2.fromOffset(5, 5)
	username.BackgroundTransparency = 1
	username.Text = plr.DisplayName
	username.Font = Enum.Font.GothamBold
	username.TextSize = 13
	username.TextColor3 = COLORS.TEXT
	username.TextStrokeTransparency = 0.3
	
	local distanceLabel = Instance.new("TextLabel", container)
	distanceLabel.Size = UDim2.new(1, -10, 0, 20)
	distanceLabel.Position = UDim2.fromOffset(5, 27)
	distanceLabel.BackgroundTransparency = 1
	distanceLabel.Text = "0m"
	distanceLabel.Font = Enum.Font.Gotham
	distanceLabel.TextSize = 12
	distanceLabel.TextColor3 = COLORS.SUCCESS
	distanceLabel.TextStrokeTransparency = 0.4
	
	local updateConnection
	updateConnection = RunService.Heartbeat:Connect(function()
		if not char or not char.Parent or not humanoid or humanoid.Health <= 0 or not player.Character then
			if updateConnection then updateConnection:Disconnect() end
			return
		end
		
		local myHRP = player.Character:FindFirstChild("HumanoidRootPart")
		if myHRP and hrp then
			local distance = (myHRP.Position - hrp.Position).Magnitude
			distanceLabel.Text = string.format("üìç %.0fm", distance)
		end
	end)
	
	table.insert(playerESPObjects, updateConnection)
end

local function refreshPlayerESP()
	for _, connection in pairs(playerESPObjects) do
		if connection and typeof(connection) == "RBXScriptConnection" then
			connection:Disconnect()
		end
	end
	playerESPObjects = {}
	
	for _, plr in pairs(Players:GetPlayers()) do
		if plr ~= player and plr.Character then
			removePlayerESP(plr.Character)
		end
	end
	
	if playerESP then
		for _, plr in pairs(Players:GetPlayers()) do
			if plr ~= player and plr.Character then
				addPlayerESP(plr.Character, plr)
			end
		end
	end
end

Players.PlayerAdded:Connect(function(plr)
	plr.CharacterAdded:Connect(function(char)
		task.wait(0.5)
		if playerESP and plr ~= player then 
			addPlayerESP(char, plr) 
		end
	end)
end)

for _, plr in pairs(Players:GetPlayers()) do
	if plr ~= player then
		plr.CharacterAdded:Connect(function(char)
			task.wait(0.5)
			if playerESP then 
				addPlayerESP(char, plr) 
			end
		end)
	end
end

Players.PlayerRemoving:Connect(function(plr)
	if plr.Character then
		removePlayerESP(plr.Character)
	end
end)

-- BRAINROT ESP LOGIC (preserved)
local brainrotESP = false
local espObjects = {}

local function isSecretBrainrot(name)
	return SECRET_BRAINROTS[name] ~= nil
end

local function getBaseValue(name)
	return SECRET_BRAINROTS[name] or 0
end

local function clearBrainrotESP()
	for _, obj in pairs(espObjects) do
		pcall(function() obj:Destroy() end)
	end
	espObjects = {}
end

local function findModifiersInBrainrot(brainrotModel)
	local foundTraits = {}
	local foundMutations = {}
	local checkedItems = {}
	
	local function checkNameMatch(name)
		local nameLower = string.lower(name)
		
		for traitName, mult in pairs(TRAITS) do
			if string.lower(traitName) == nameLower and not checkedItems[traitName] then
				return traitName, mult, "Trait"
			end
		end
		
		for mutationName, mult in pairs(MUTATIONS) do
			if string.lower(mutationName) == nameLower and not checkedItems[mutationName] then
				return mutationName, mult, "Mutation"
			end
		end
		
		return nil, nil, nil
	end
	
	local configFolderNames = {"Traits", "Mutations", "Modifiers", "Properties", "Stats", "Configuration", "Config"}
	
	for _, folderName in ipairs(configFolderNames) do
		local configFolder = brainrotModel:FindFirstChild(folderName)
		if configFolder then
			for _, child in pairs(configFolder:GetChildren()) do
				local matchName, matchMult, matchType = checkNameMatch(child.Name)
				
				if matchName then
					local isEnabled = false
					
					if child:IsA("BoolValue") then
						isEnabled = (child.Value == true)
					elseif child:IsA("StringValue") then
						local val = tostring(child.Value)
						isEnabled = (val ~= "" and val ~= "false" and val ~= "0")
					elseif child:IsA("IntValue") or child:IsA("NumberValue") then
						isEnabled = (child.Value > 0)
					elseif child:IsA("Configuration") or child:IsA("Folder") then
						isEnabled = true
					end
					
					if isEnabled then
						if matchType == "Trait" then
							foundTraits[matchName] = matchMult
							checkedItems[matchName] = true
						elseif matchType == "Mutation" then
							foundMutations[matchName] = matchMult
							checkedItems[matchName] = true
						end
					end
				end
			end
		end
	end
	
	return foundTraits, foundMutations
end

local function findBrainrotsByName()
	local found = {}
	
	for _, obj in pairs(workspace:GetDescendants()) do
		if obj:IsA("Model") and isSecretBrainrot(obj.Name) then
			local primaryPart = obj.PrimaryPart or obj:FindFirstChildWhichIsA("BasePart")
			
			if primaryPart then
				local baseValue = getBaseValue(obj.Name)
				local traitsFound, mutationsFound = findModifiersInBrainrot(obj)
				
				local totalMultiplier = 0
				local foundModifiers = {}
				local traitCount = 0
				local mutationCount = 0
				
				for mutationName, multiplier in pairs(mutationsFound) do
					if mutationCount == 0 then
						totalMultiplier = totalMultiplier + multiplier
					else
						totalMultiplier = totalMultiplier + (multiplier - 1)
					end
					mutationCount = mutationCount + 1
					table.insert(foundModifiers, {name = mutationName, mult = multiplier, type = "Mutation"})
				end
				
				for traitName, multiplier in pairs(traitsFound) do
					if traitCount == 0 and mutationCount == 0 then
						totalMultiplier = totalMultiplier + multiplier
					else
						totalMultiplier = totalMultiplier + (multiplier - 1)
					end
					traitCount = traitCount + 1
					table.insert(foundModifiers, {name = traitName, mult = multiplier, type = "Trait"})
				end
				
				if totalMultiplier == 0 then
					totalMultiplier = 1
				end
				
				local finalValue = baseValue * totalMultiplier
				
				table.insert(found, {
					model = obj,
					name = obj.Name,
					part = primaryPart,
					value = finalValue,
					baseValue = baseValue,
					multiplier = totalMultiplier,
					modifiers = foundModifiers
				})
			end
		end
	end
	
	return found
end

local function createBrainrotESP()
	if not brainrotESP then return end
	
	clearBrainrotESP()
	
	local brainrots = findBrainrotsByName()
	
	if #brainrots == 0 then
		warn("‚ùå No secret brainrots found")
		return
	end
	
	table.sort(brainrots, function(a, b)
		if a.value ~= b.value then
			return a.value > b.value
		end
		if #a.modifiers ~= #b.modifiers then
			return #a.modifiers > #b.modifiers
		end
		return a.baseValue > b.baseValue
	end)
	
	local bestBrainrot = brainrots[1]
	local data = bestBrainrot
	
	print(string.format("üèÜ BEST: %s (%s/s)", data.name, formatMoney(data.value)))
	
	local model = data.model
	local part = data.part
	
	local highlight = Instance.new("Highlight")
	highlight.Parent = model
	highlight.FillTransparency = 0.5
	highlight.OutlineTransparency = 0.1
	highlight.FillColor = COLORS.ACCENT
	highlight.OutlineColor = COLORS.PRIMARY
	highlight.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
	table.insert(espObjects, highlight)
	
	local billboard = Instance.new("BillboardGui", part)
	billboard.Size = UDim2.fromOffset(180, 100)
	billboard.StudsOffset = Vector3.new(0, 6, 0)
	billboard.AlwaysOnTop = true
	billboard.MaxDistance = 3000
	
	local bg = Instance.new("Frame", billboard)
	bg.Size = UDim2.fromScale(1, 1)
	bg.BackgroundColor3 = COLORS.BG_GLASS
	bg.BackgroundTransparency = 0.25
	bg.BorderSizePixel = 0
	Instance.new("UICorner", bg).CornerRadius = UDim.new(0, 12)
	
	local stroke = Instance.new("UIStroke", bg)
	stroke.Color = COLORS.PRIMARY
	stroke.Thickness = 2
	stroke.Transparency = 0.25
	
	local crownLabel = Instance.new("TextLabel", bg)
	crownLabel.Size = UDim2.fromOffset(24, 24)
	crownLabel.Position = UDim2.fromOffset(6, 5)
	crownLabel.BackgroundTransparency = 1
	crownLabel.Text = "üëë"
	crownLabel.Font = Enum.Font.FredokaOne
	crownLabel.TextSize = 20
	
	local secretLabel = Instance.new("TextLabel", bg)
	secretLabel.Size = UDim2.new(1, -36, 0, 20)
	secretLabel.Position = UDim2.fromOffset(34, 5)
	secretLabel.BackgroundTransparency = 1
	secretLabel.Text = "BEST SECRET"
	secretLabel.Font = Enum.Font.GothamBold
	secretLabel.TextSize = 12
	secretLabel.TextColor3 = COLORS.ACCENT
	secretLabel.TextXAlignment = Enum.TextXAlignment.Left
	secretLabel.TextStrokeTransparency = 0.4
	
	local nameLabel = Instance.new("TextLabel", bg)
	nameLabel.Size = UDim2.new(1, -12, 0, 20)
	nameLabel.Position = UDim2.fromOffset(6, 28)
	nameLabel.BackgroundTransparency = 1
	nameLabel.Text = data.name
	nameLabel.Font = Enum.Font.GothamBold
	nameLabel.TextSize = 12
	nameLabel.TextColor3 = COLORS.TEXT
	nameLabel.TextWrapped = true
	nameLabel.TextXAlignment = Enum.TextXAlignment.Left
	nameLabel.TextStrokeTransparency = 0.5
	
	local valueLabel = Instance.new("TextLabel", bg)
	valueLabel.Size = UDim2.fromOffset(130, 20)
	valueLabel.Position = UDim2.fromOffset(6, 50)
	valueLabel.BackgroundTransparency = 1
	valueLabel.Text = string.format("üí∞ %s/s", formatMoney(data.value))
	valueLabel.Font = Enum.Font.GothamBold
	valueLabel.TextSize = 14
	valueLabel.TextColor3 = COLORS.SUCCESS
	valueLabel.TextXAlignment = Enum.TextXAlignment.Left
	valueLabel.TextStrokeTransparency = 0.4
	
	if data.multiplier > 1 then
		local multBadge = Instance.new("Frame", bg)
		multBadge.Size = UDim2.fromOffset(48, 18)
		multBadge.Position = UDim2.fromOffset(126, 51)
		multBadge.BackgroundColor3 = COLORS.DANGER
		multBadge.BackgroundTransparency = 0.05
		multBadge.BorderSizePixel = 0
		Instance.new("UICorner", multBadge).CornerRadius = UDim.new(0, 9)
		
		local multLabel = Instance.new("TextLabel", multBadge)
		multLabel.Size = UDim2.fromScale(1, 1)
		multLabel.BackgroundTransparency = 1
		multLabel.Text = string.format("√ó%.1f", data.multiplier)
		multLabel.Font = Enum.Font.GothamBold
		multLabel.TextSize = 11
		multLabel.TextColor3 = COLORS.TEXT
	end
	
	if #data.modifiers > 0 then
		local modText = ""
		local traitStrs = {}
		local mutationStrs = {}
		
		for _, mod in ipairs(data.modifiers) do
			if mod.type == "Trait" then
				local emoji = TRAIT_EMOJIS[mod.name] or "‚ú®"
				table.insert(traitStrs, string.format("%s %s", emoji, mod.name))
			elseif mod.type == "Mutation" then
				local emoji = MUTATION_EMOJIS[mod.name] or "üß¨"
				table.insert(mutationStrs, string.format("%s %s", emoji, mod.name))
			end
		end
		
		if #mutationStrs > 0 then
			modText = table.concat(mutationStrs, " ‚Ä¢ ")
		end
		
		if #traitStrs > 0 then
			if modText ~= "" then modText = modText .. "\n" end
			modText = modText .. table.concat(traitStrs, " ‚Ä¢ ")
		end
		
		local modLabel = Instance.new("TextLabel", bg)
		modLabel.Size = UDim2.new(1, -12, 0, 26)
		modLabel.Position = UDim2.fromOffset(6, 72)
		modLabel.BackgroundTransparency = 1
		modLabel.Text = modText
		modLabel.Font = Enum.Font.Gotham
		modLabel.TextSize = 10
		modLabel.TextColor3 = Color3.fromRGB(180, 200, 255)
		modLabel.TextWrapped = true
		modLabel.TextXAlignment = Enum.TextXAlignment.Left
		modLabel.TextYAlignment = Enum.TextYAlignment.Top
	end
	
	table.insert(espObjects, billboard)
end

-- LOCK ESP (preserved)
local lockESP = false
local lockESPObjects = {}

local function parseTimeText(text)
	if not text or text == "" then return 0 end
	local lowerText = string.lower(text)
	if string.find(lowerText, "unlock") or string.find(lowerText, "ready") then return 0 end
	local totalSeconds = 0
	local hours = string.match(text, "(%d+)h")
	if hours then totalSeconds = totalSeconds + (tonumber(hours) * 3600) end
	local mins = string.match(text, "(%d+)m")
	if mins then totalSeconds = totalSeconds + (tonumber(mins) * 60) end
	local secs = string.match(text, "(%d+)s")
	if secs then totalSeconds = totalSeconds + tonumber(secs) end
	if totalSeconds == 0 then
		local num = tonumber(text)
		if num then totalSeconds = num end
	end
	return totalSeconds
end

local function clearLockESP()
	for _, obj in pairs(lockESPObjects) do
		pcall(function()
			if typeof(obj) == "RBXScriptConnection" then
				obj:Disconnect()
			else
				obj:Destroy()
			end
		end)
	end
	lockESPObjects = {}
end

local function findPlayerBases()
	local bases = {}
	local currentPlayers = {}
	for _, plr in pairs(Players:GetPlayers()) do
		currentPlayers[plr.Name] = true
		currentPlayers[plr.DisplayName] = true
	end
	
	local plotsFolder = workspace:FindFirstChild("Plots")
	if plotsFolder then
		for _, plot in pairs(plotsFolder:GetChildren()) do
			if plot:IsA("Model") then
				local owner = "Unknown"
				local remainingTimeLabel = nil
				local basePart = nil
				
				local purchases = plot:FindFirstChild("Purchases")
				if purchases then
					local plotBlock = purchases:FindFirstChild("PlotBlock")
					if plotBlock then
						local main = plotBlock:FindFirstChild("Main")
						if main then
							local billboardGui = main:FindFirstChild("BillboardGui")
							if billboardGui then
								local remainingTime = billboardGui:FindFirstChild("RemainingTime")
								if remainingTime and remainingTime:IsA("TextLabel") then
									remainingTimeLabel = remainingTime
								end
							end
						end
						
						local ownerValue = plotBlock:FindFirstChild("Owner", true) or plot:FindFirstChild("Owner", true)
						
						if ownerValue then
							if ownerValue:IsA("StringValue") then
								owner = ownerValue.Value
							elseif ownerValue:IsA("ObjectValue") and ownerValue.Value then
								if ownerValue.Value:IsA("Player") then
									owner = ownerValue.Value.Name
								end
							end
						end
					end
				end
				
				basePart = plot.PrimaryPart or plot:FindFirstChildWhichIsA("BasePart", true)
				
				if remainingTimeLabel and basePart and (currentPlayers[owner] or owner == "Unknown") then
					table.insert(bases, {
						model = plot,
						part = basePart,
						timerLabel = remainingTimeLabel,
						owner = owner
					})
				end
			end
		end
	end
	
	return bases
end

local function createLockESP()
	if not lockESP then return end
	clearLockESP()
	
	local bases = findPlayerBases()
	
	if #bases == 0 then
		warn("‚ö†Ô∏è No player bases found")
		return
	end
	
	for _, baseData in ipairs(bases) do
		local part = baseData.part
		local timerLabel = baseData.timerLabel
		
		local highlight = Instance.new("Highlight")
		highlight.Parent = baseData.model
		highlight.FillTransparency = 0.5
		highlight.OutlineTransparency = 0.1
		highlight.FillColor = COLORS.WARNING
		highlight.OutlineColor = Color3.fromRGB(255, 150, 0)
		highlight.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
		table.insert(lockESPObjects, highlight)
		
		local billboard = Instance.new("BillboardGui", part)
		billboard.Size = UDim2.fromOffset(150, 75)
		billboard.StudsOffset = Vector3.new(0, 6, 0)
		billboard.AlwaysOnTop = true
		billboard.MaxDistance = 2000
		table.insert(lockESPObjects, billboard)
		
		local bg = Instance.new("Frame", billboard)
		bg.Size = UDim2.fromScale(1, 1)
		bg.BackgroundColor3 = COLORS.BG_GLASS
		bg.BackgroundTransparency = 0.25
		bg.BorderSizePixel = 0
		Instance.new("UICorner", bg).CornerRadius = UDim.new(0, 12)
		
		local stroke = Instance.new("UIStroke", bg)
		stroke.Color = COLORS.WARNING
		stroke.Thickness = 2
		stroke.Transparency = 0.25
		
		local lockIcon = Instance.new("TextLabel", bg)
		lockIcon.Size = UDim2.fromOffset(22, 22)
		lockIcon.Position = UDim2.fromOffset(5, 5)
		lockIcon.BackgroundTransparency = 1
		lockIcon.Text = "üîí"
		lockIcon.Font = Enum.Font.FredokaOne
		lockIcon.TextSize = 18
		lockIcon.TextScaled = false
		
		local titleLabel = Instance.new("TextLabel", bg)
		titleLabel.Size = UDim2.new(1, -30, 0, 16)
		titleLabel.Position = UDim2.fromOffset(29, 5)
		titleLabel.BackgroundTransparency = 1
		titleLabel.Text = "BASE LOCK"
		titleLabel.Font = Enum.Font.GothamBold
		titleLabel.TextSize = 11
		titleLabel.TextColor3 = COLORS.WARNING
		titleLabel.TextXAlignment = Enum.TextXAlignment.Left
		titleLabel.TextStrokeTransparency = 0.4
		
		local ownerLabel = Instance.new("TextLabel", bg)
		ownerLabel.Size = UDim2.new(1, -10, 0, 14)
		ownerLabel.Position = UDim2.fromOffset(5, 24)
		ownerLabel.BackgroundTransparency = 1
		ownerLabel.Text = string.format("üë§ %s", baseData.owner)
		ownerLabel.Font = Enum.Font.Gotham
		ownerLabel.TextSize = 10
		ownerLabel.TextColor3 = COLORS.TEXT_MUTED
		ownerLabel.TextXAlignment = Enum.TextXAlignment.Left
		ownerLabel.TextStrokeTransparency = 0.5
		ownerLabel.TextWrapped = true
		
		local timerDisplayLabel = Instance.new("TextLabel", bg)
		timerDisplayLabel.Size = UDim2.new(1, -10, 0, 18)
		timerDisplayLabel.Position = UDim2.fromOffset(5, 40)
		timerDisplayLabel.BackgroundTransparency = 1
		timerDisplayLabel.Text = "‚è∞ Calculating..."
		timerDisplayLabel.Font = Enum.Font.GothamBold
		timerDisplayLabel.TextSize = 13
		timerDisplayLabel.TextColor3 = COLORS.TEXT
		timerDisplayLabel.TextXAlignment = Enum.TextXAlignment.Left
		timerDisplayLabel.TextStrokeTransparency = 0.4
		
		local statusLabel = Instance.new("TextLabel", bg)
		statusLabel.Size = UDim2.new(1, -10, 0, 13)
		statusLabel.Position = UDim2.fromOffset(5, 60)
		statusLabel.BackgroundTransparency = 1
		statusLabel.Text = "üîí Locked"
		statusLabel.Font = Enum.Font.Gotham
		statusLabel.TextSize = 10
		statusLabel.TextColor3 = COLORS.DANGER
		statusLabel.TextXAlignment = Enum.TextXAlignment.Left
		statusLabel.TextStrokeTransparency = 0.5
		
		local updateConnection = RunService.Heartbeat:Connect(function()
			if not timerLabel or not timerLabel.Parent then
				if updateConnection then updateConnection:Disconnect() end
				return
			end
			
			local timeText = timerLabel.Text
			local timeLeft = parseTimeText(timeText)
			
			if timeLeft <= 0 then
				timerDisplayLabel.Text = "‚è∞ UNLOCKED"
				timerDisplayLabel.TextColor3 = COLORS.SUCCESS
				statusLabel.Text = "üîì Ready to steal!"
				statusLabel.TextColor3 = COLORS.SUCCESS
				lockIcon.Text = "üîì"
				titleLabel.Text = "UNLOCKED"
				titleLabel.TextColor3 = COLORS.SUCCESS
				
				if highlight then
					highlight.FillColor = COLORS.SUCCESS
					highlight.OutlineColor = Color3.fromRGB(50, 255, 50)
				end
				stroke.Color = COLORS.SUCCESS
			else
				timerDisplayLabel.Text = string.format("‚è∞ %s", timeText)
				timerDisplayLabel.TextColor3 = COLORS.TEXT
				
				if timeLeft < 10 then
					statusLabel.Text = "‚ö° Almost ready!"
					statusLabel.TextColor3 = COLORS.SUCCESS
				elseif timeLeft < 30 then
					statusLabel.Text = "‚è≥ Soon..."
					statusLabel.TextColor3 = COLORS.WARNING
				else
					statusLabel.Text = "üîí Locked"
					statusLabel.TextColor3 = COLORS.DANGER
				end
			end
		end)
		
		table.insert(lockESPObjects, updateConnection)
	end
end

-- ESP Toggles
local playerToggle, getPlayerState, togglePlayer = createToggle(
	"Player ESP",
	"Highlights all players with distance and username labels",
	espContent
)

local brainrotToggle, getBrainrotState, toggleBrainrot = createToggle(
	"Brainrot ESP",
	"Automatically finds the best secret brainrot with value calculation",
	espContent
)

local lockToggle, getLockState, toggleLock = createToggle(
	"Lock ESP",
	"Shows base lock timers and countdown until unlock",
	espContent
)

playerToggle.MouseButton1Click:Connect(function()
	local state = togglePlayer()
	playerESP = state
	refreshPlayerESP()
	print("ü¶Ü Player ESP:", state and "ON" or "OFF")
end)

brainrotToggle.MouseButton1Click:Connect(function()
	local state = toggleBrainrot()
	brainrotESP = state
	print("ü¶Ü Brainrot ESP:", state and "ON" or "OFF")
	
	if state then
		createBrainrotESP()
	else
		clearBrainrotESP()
	end
end)

lockToggle.MouseButton1Click:Connect(function()
	local state = toggleLock()
	lockESP = state
	print("ü¶Ü Lock ESP:", state and "ON" or "OFF")
	
	if state then
		createLockESP()
	else
		clearLockESP()
	end
end)

-- Auto-refresh ESP
spawn(function()
	while gui.Parent do
		task.wait(15)
		if brainrotESP then createBrainrotESP() end
		if lockESP then createLockESP() end
	end
end)

--======================
-- WORLD SECTION FEATURES
--======================

-- Helper: Create premium action card with enhanced styling
local function createActionCard(text, description, icon, parent, callback)
	local container = Instance.new("Frame", parent)
	container.Size = UDim2.fromOffset(485, 75)  -- Changed from 615, 95
	container.BackgroundColor3 = COLORS.BG_CARD
	container.BackgroundTransparency = 0.4
	container.BorderSizePixel = 0
	
	local corner = Instance.new("UICorner", container)
	corner.CornerRadius = UDim.new(0, 13)  -- Changed from 16
	
	local stroke = Instance.new("UIStroke", container)
	stroke.Color = COLORS.PRIMARY
	stroke.Thickness = 1.5
	stroke.Transparency = 0.75
	
	-- Top gradient overlay
	local topGradient = Instance.new("Frame", container)
	topGradient.Size = UDim2.fromScale(1, 0.35)
	topGradient.BackgroundColor3 = COLORS.PRIMARY_GLOW
	topGradient.BackgroundTransparency = 0.92
	topGradient.BorderSizePixel = 0
	
	local topGradCorner = Instance.new("UICorner", topGradient)
	topGradCorner.CornerRadius = UDim.new(0, 13)  -- Changed from 16
	
	local topGradGrad = Instance.new("UIGradient", topGradient)
	topGradGrad.Transparency = NumberSequence.new({
		NumberSequenceKeypoint.new(0, 0),
		NumberSequenceKeypoint.new(1, 1)
	})
	topGradGrad.Rotation = 90
	
	-- Icon background with glow
	local iconBg = Instance.new("Frame", container)
	iconBg.Size = UDim2.fromOffset(48, 48)  -- Changed from 60, 60
	iconBg.Position = UDim2.fromOffset(14, 14)  -- Changed from 18, 18
	iconBg.BackgroundColor3 = COLORS.PRIMARY
	iconBg.BackgroundTransparency = 0.8
	iconBg.BorderSizePixel = 0
	iconBg.ZIndex = 2
	
	local iconCorner = Instance.new("UICorner", iconBg)
	iconCorner.CornerRadius = UDim.new(0, 11)  -- Changed from 14
	
	local iconStroke = Instance.new("UIStroke", iconBg)
	iconStroke.Color = COLORS.ACCENT
	iconStroke.Thickness = 2
	iconStroke.Transparency = 0.5
	
	local iconGlow = Instance.new("ImageLabel", iconBg)
	iconGlow.Size = UDim2.fromScale(1.4, 1.4)
	iconGlow.Position = UDim2.fromScale(0.5, 0.5)
	iconGlow.AnchorPoint = Vector2.new(0.5, 0.5)
	iconGlow.BackgroundTransparency = 1
	iconGlow.Image = "rbxassetid://5028857084"
	iconGlow.ImageColor3 = COLORS.ACCENT
	iconGlow.ImageTransparency = 0.7
	iconGlow.ScaleType = Enum.ScaleType.Slice
	iconGlow.SliceCenter = Rect.new(24, 24, 276, 276)
	iconGlow.ZIndex = 1
	
	local iconLabel = Instance.new("TextLabel", iconBg)
	iconLabel.Size = UDim2.fromScale(1, 1)
	iconLabel.BackgroundTransparency = 1
	iconLabel.Text = icon
	iconLabel.Font = Enum.Font.GothamBold
	iconLabel.TextSize = 28  -- Changed from 36
	iconLabel.TextColor3 = COLORS.ACCENT
	iconLabel.ZIndex = 3
	
	local label = Instance.new("TextLabel", container)
	label.Size = UDim2.fromOffset(330, 20)  -- Changed from 430, 24
	label.Position = UDim2.fromOffset(70, 16)  -- Changed from 88, 20
	label.BackgroundTransparency = 1
	label.Text = text
	label.Font = Enum.Font.GothamBold
	label.TextSize = 14  -- Changed from 16
	label.TextColor3 = COLORS.TEXT
	label.TextXAlignment = Enum.TextXAlignment.Left
	label.ZIndex = 2
	
	local desc = Instance.new("TextLabel", container)
	desc.Size = UDim2.fromOffset(330, 32)  -- Changed from 430, 40
	desc.Position = UDim2.fromOffset(70, 40)  -- Changed from 88, 50
	desc.BackgroundTransparency = 1
	desc.Text = description
	desc.Font = Enum.Font.Gotham
	desc.TextSize = 11  -- Changed from 13
	desc.TextColor3 = COLORS.TEXT_MUTED
	desc.TextXAlignment = Enum.TextXAlignment.Left
	desc.TextWrapped = true
	desc.ZIndex = 2
	
	-- Premium action button
	local actionBtn = Instance.new("TextButton", container)
	actionBtn.Size = UDim2.fromOffset(62, 32)  -- Changed from 75, 38
	actionBtn.Position = UDim2.fromOffset(412, 22)  -- Changed from 524, 29
	actionBtn.BackgroundColor3 = COLORS.PRIMARY
	actionBtn.BackgroundTransparency = 0.15
	actionBtn.Text = "‚ñ∂"
	actionBtn.Font = Enum.Font.GothamBold
	actionBtn.TextSize = 18  -- Changed from 22
	actionBtn.TextColor3 = COLORS.TEXT
	actionBtn.BorderSizePixel = 0
	actionBtn.AutoButtonColor = false
	actionBtn.ZIndex = 2
	
	local btnCorner = Instance.new("UICorner", actionBtn)
	btnCorner.CornerRadius = UDim.new(0, 10)  -- Changed from 12
	
	local btnStroke = Instance.new("UIStroke", actionBtn)
	btnStroke.Color = COLORS.ACCENT
	btnStroke.Thickness = 2
	btnStroke.Transparency = 0.3
	
	-- Button glow
	local btnGlow = Instance.new("ImageLabel", actionBtn)
	btnGlow.Size = UDim2.fromScale(1.3, 1.3)
	btnGlow.Position = UDim2.fromScale(0.5, 0.5)
	btnGlow.AnchorPoint = Vector2.new(0.5, 0.5)
	btnGlow.BackgroundTransparency = 1
	btnGlow.Image = "rbxassetid://5028857084"
	btnGlow.ImageColor3 = COLORS.ACCENT
	btnGlow.ImageTransparency = 1
	btnGlow.ScaleType = Enum.ScaleType.Slice
	btnGlow.SliceCenter = Rect.new(24, 24, 276, 276)
	btnGlow.ZIndex = 1
	
	actionBtn.MouseEnter:Connect(function()
		TweenService:Create(container, ANIM.SMOOTH, {BackgroundTransparency = 0.25}):Play()
		TweenService:Create(stroke, ANIM.SMOOTH, {Transparency = 0.5}):Play()
		TweenService:Create(actionBtn, ANIM.SMOOTH, {BackgroundTransparency = 0, Size = UDim2.fromOffset(66, 36)}):Play()  -- Changed from 80, 42
		TweenService:Create(btnStroke, ANIM.SMOOTH, {Thickness = 2.5, Transparency = 0.1}):Play()
		TweenService:Create(btnGlow, ANIM.SMOOTH, {ImageTransparency = 0.5}):Play()
		TweenService:Create(iconGlow, ANIM.SMOOTH, {ImageTransparency = 0.4}):Play()
	end)
	
	actionBtn.MouseLeave:Connect(function()
		TweenService:Create(container, ANIM.SMOOTH, {BackgroundTransparency = 0.4}):Play()
		TweenService:Create(stroke, ANIM.SMOOTH, {Transparency = 0.75}):Play()
		TweenService:Create(actionBtn, ANIM.SMOOTH, {BackgroundTransparency = 0.15, Size = UDim2.fromOffset(62, 32)}):Play()  -- Changed from 75, 38
		TweenService:Create(btnStroke, ANIM.SMOOTH, {Thickness = 2, Transparency = 0.3}):Play()
		TweenService:Create(btnGlow, ANIM.SMOOTH, {ImageTransparency = 1}):Play()
		TweenService:Create(iconGlow, ANIM.SMOOTH, {ImageTransparency = 0.7}):Play()
	end)
	
	actionBtn.MouseButton1Click:Connect(function()
		if callback then callback(actionBtn) end
	end)
	
	return container, actionBtn
end

-- ADMIN COMMAND SPAMMER
local isAdminSpammerOpen = false
local adminSpammerMenu = nil

local function sendChatMessage(message)
	local TextChatService = game:GetService("TextChatService")
	
	pcall(function()
		local textChannel = TextChatService:WaitForChild("TextChannels"):WaitForChild("RBXGeneral", 5)
		if textChannel then
			textChannel:SendAsync(message)
		end
	end)
	
	pcall(function()
		local ChatService = game:GetService("Chat")
		if player and player.Character then
			ChatService:Chat(player.Character, message)
		end
	end)
	
	pcall(function()
		local sayMessageRequest = ReplicatedStorage:FindFirstChild("DefaultChatSystemChatEvents")
			and ReplicatedStorage.DefaultChatSystemChatEvents:FindFirstChild("SayMessageRequest")
		if sayMessageRequest then
			sayMessageRequest:FireServer(message, "All")
		end
	end)
end

local function spamAdminCommands(targetPlayer)
	local commands = {"rocket", "ragdoll", "balloon", "inverse", "nightvision", "jail", "tiny", "jumpscare", "morph"}
	
	print("üöÄ Starting spam on: " .. targetPlayer)
	
	for _, cmd in pairs(commands) do
		pcall(function()
			local chatCommand = ";" .. cmd .. " " .. string.lower(targetPlayer)
			sendChatMessage(chatCommand)
			print("‚úÖ Sent: " .. chatCommand)
		end)
		task.wait(0.2)
	end
	
	print("‚úÖ Finished spam on: " .. targetPlayer)
end

local function createAdminSpammerMenu()
	if adminSpammerMenu then adminSpammerMenu:Destroy() end
	
	adminSpammerMenu = Instance.new("Frame", gui)
	adminSpammerMenu.Size = UDim2.fromOffset(0, 650)
	adminSpammerMenu.Position = UDim2.new(1, 50, 0.5, -325)
	adminSpammerMenu.BackgroundColor3 = COLORS.BG_GLASS
	adminSpammerMenu.BackgroundTransparency = 0.12
	adminSpammerMenu.BorderSizePixel = 0
	adminSpammerMenu.ClipsDescendants = true
	adminSpammerMenu.Active = true
	adminSpammerMenu.ZIndex = 100
	
	local menuCorner = Instance.new("UICorner", adminSpammerMenu)
	menuCorner.CornerRadius = UDim.new(0, 24)
	
	local menuStroke = Instance.new("UIStroke", adminSpammerMenu)
	menuStroke.Color = COLORS.ACCENT
	menuStroke.Thickness = 2
	menuStroke.Transparency = 0.25
	
	-- Menu glow
	local menuGlow = Instance.new("ImageLabel", adminSpammerMenu)
	menuGlow.Size = UDim2.fromScale(1.02, 1.02)
	menuGlow.Position = UDim2.fromScale(0.5, 0.5)
	menuGlow.AnchorPoint = Vector2.new(0.5, 0.5)
	menuGlow.BackgroundTransparency = 1
	menuGlow.Image = "rbxassetid://5028857084"
	menuGlow.ImageColor3 = COLORS.ACCENT
	menuGlow.ImageTransparency = 0.5
	menuGlow.ScaleType = Enum.ScaleType.Slice
	menuGlow.SliceCenter = Rect.new(24, 24, 276, 276)
	menuGlow.ZIndex = 99
	
	-- Draggable
	local dragging, dragStart, startPos
	
	adminSpammerMenu.InputBegan:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseButton1 then
			dragging = true
			dragStart = input.Position
			startPos = adminSpammerMenu.Position
			
			input.Changed:Connect(function()
				if input.UserInputState == Enum.UserInputState.End then
					dragging = false
				end
			end)
		end
	end)
	
	UserInputService.InputChanged:Connect(function(input)
		if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
			local delta = input.Position - dragStart
			adminSpammerMenu.Position = UDim2.new(
				startPos.X.Scale, startPos.X.Offset + delta.X,
				startPos.Y.Scale, startPos.Y.Offset + delta.Y
			)
		end
	end)
	
	-- Header
	local header = Instance.new("Frame", adminSpammerMenu)
	header.Size = UDim2.fromOffset(360, 90)
	header.BackgroundColor3 = COLORS.BG_CARD
	header.BackgroundTransparency = 0.3
	header.BorderSizePixel = 0
	header.ZIndex = 102
	
	local headerCorner = Instance.new("UICorner", header)
	headerCorner.CornerRadius = UDim.new(0, 24)
	
	-- Header gradient
	local headerGrad = Instance.new("Frame", header)
	headerGrad.Size = UDim2.fromScale(1, 0.5)
	headerGrad.BackgroundColor3 = COLORS.ACCENT
	headerGrad.BackgroundTransparency = 0.9
	headerGrad.BorderSizePixel = 0
	
	local headerGradCorner = Instance.new("UICorner", headerGrad)
	headerGradCorner.CornerRadius = UDim.new(0, 24)
	
	local headerGradGrad = Instance.new("UIGradient", headerGrad)
	headerGradGrad.Transparency = NumberSequence.new({
		NumberSequenceKeypoint.new(0, 0),
		NumberSequenceKeypoint.new(1, 1)
	})
	headerGradGrad.Rotation = 90
	
	local headerIcon = Instance.new("TextLabel", header)
	headerIcon.Size = UDim2.fromOffset(55, 55)
	headerIcon.Position = UDim2.fromOffset(153, 8)
	headerIcon.BackgroundTransparency = 1
	headerIcon.Text = "‚ö°"
	headerIcon.Font = Enum.Font.GothamBold
	headerIcon.TextSize = 44
	headerIcon.ZIndex = 103
	
	local headerTitle = Instance.new("TextLabel", header)
	headerTitle.Size = UDim2.fromOffset(340, 22)
	headerTitle.Position = UDim2.fromOffset(10, 64)
	headerTitle.BackgroundTransparency = 1
	headerTitle.Text = "ADMIN COMMAND SPAMMER"
	headerTitle.Font = Enum.Font.GothamBold
	headerTitle.TextSize = 17
	headerTitle.TextColor3 = COLORS.TEXT
	headerTitle.ZIndex = 103
	
	-- Player list
	local playerListFrame = Instance.new("ScrollingFrame", adminSpammerMenu)
	playerListFrame.Size = UDim2.fromOffset(340, 535)
	playerListFrame.Position = UDim2.fromOffset(10, 105)
	playerListFrame.BackgroundColor3 = COLORS.BG_CARD
	playerListFrame.BackgroundTransparency = 0.35
	playerListFrame.BorderSizePixel = 0
	playerListFrame.ScrollBarThickness = 6
	playerListFrame.ScrollBarImageColor3 = COLORS.PRIMARY
	playerListFrame.ScrollBarImageTransparency = 0.3
	playerListFrame.CanvasSize = UDim2.fromOffset(340, 0)
	playerListFrame.AutomaticCanvasSize = Enum.AutomaticSize.Y
	playerListFrame.ZIndex = 102
	
	local listCorner = Instance.new("UICorner", playerListFrame)
	listCorner.CornerRadius = UDim.new(0, 16)
	
	local playerLayout = Instance.new("UIListLayout", playerListFrame)
	playerLayout.SortOrder = Enum.SortOrder.Name
	playerLayout.Padding = UDim.new(0, 10)
	
	local listPadding = Instance.new("UIPadding", playerListFrame)
	listPadding.PaddingTop = UDim.new(0, 12)
	listPadding.PaddingBottom = UDim.new(0, 12)
	listPadding.PaddingLeft = UDim.new(0, 12)
	listPadding.PaddingRight = UDim.new(0, 12)
	
	local function createPlayerEntry(plr)
		local entry = Instance.new("Frame", playerListFrame)
		entry.Name = plr.Name
		entry.Size = UDim2.fromOffset(306, 68)
		entry.BackgroundColor3 = COLORS.BG_GLASS
		entry.BackgroundTransparency = 0.4
		entry.BorderSizePixel = 0
		entry.ZIndex = 103
		
		local entryCorner = Instance.new("UICorner", entry)
		entryCorner.CornerRadius = UDim.new(0, 12)
		
		local entryStroke = Instance.new("UIStroke", entry)
		entryStroke.Color = COLORS.PRIMARY
		entryStroke.Thickness = 1.5
		entryStroke.Transparency = 0.65
		
		local nameLabel = Instance.new("TextLabel", entry)
		nameLabel.Size = UDim2.fromOffset(200, 26)
		nameLabel.Position = UDim2.fromOffset(12, 10)
		nameLabel.BackgroundTransparency = 1
		nameLabel.Text = plr.Name
		nameLabel.Font = Enum.Font.GothamBold
		nameLabel.TextSize = 15
		nameLabel.TextColor3 = COLORS.TEXT
		nameLabel.TextXAlignment = Enum.TextXAlignment.Left
		nameLabel.TextTruncate = Enum.TextTruncate.AtEnd
		nameLabel.ZIndex = 104
		
		local displayLabel = Instance.new("TextLabel", entry)
		displayLabel.Size = UDim2.fromOffset(200, 20)
		displayLabel.Position = UDim2.fromOffset(12, 40)
		displayLabel.BackgroundTransparency = 1
		displayLabel.Text = "@" .. plr.DisplayName
		displayLabel.Font = Enum.Font.Gotham
		displayLabel.TextSize = 12
		displayLabel.TextColor3 = COLORS.TEXT_MUTED
		displayLabel.TextXAlignment = Enum.TextXAlignment.Left
		displayLabel.TextTruncate = Enum.TextTruncate.AtEnd
		displayLabel.ZIndex = 104
		
		local spamBtn = Instance.new("TextButton", entry)
		spamBtn.Size = UDim2.fromOffset(78, 44)
		spamBtn.Position = UDim2.fromOffset(216, 12)
		spamBtn.BackgroundColor3 = COLORS.DANGER
		spamBtn.BackgroundTransparency = 0.15
		spamBtn.Text = "SPAM"
		spamBtn.Font = Enum.Font.GothamBold
		spamBtn.TextSize = 13
		spamBtn.TextColor3 = COLORS.TEXT
		spamBtn.BorderSizePixel = 0
		spamBtn.AutoButtonColor = false
		spamBtn.ZIndex = 104
		
		local btnCorner = Instance.new("UICorner", spamBtn)
		btnCorner.CornerRadius = UDim.new(0, 10)
		
		local btnStroke = Instance.new("UIStroke", spamBtn)
		btnStroke.Color = COLORS.DANGER
		btnStroke.Thickness = 1.5
		btnStroke.Transparency = 0.4
		
		spamBtn.MouseEnter:Connect(function()
			TweenService:Create(spamBtn, ANIM.SMOOTH, {BackgroundTransparency = 0, Size = UDim2.fromOffset(82, 48)}):Play()
			TweenService:Create(entry, ANIM.SMOOTH, {BackgroundTransparency = 0.25}):Play()
			TweenService:Create(btnStroke, ANIM.SMOOTH, {Transparency = 0.2}):Play()
		end)
		
		spamBtn.MouseLeave:Connect(function()
			TweenService:Create(spamBtn, ANIM.SMOOTH, {BackgroundTransparency = 0.15, Size = UDim2.fromOffset(78, 44)}):Play()
			TweenService:Create(entry, ANIM.SMOOTH, {BackgroundTransparency = 0.4}):Play()
			TweenService:Create(btnStroke, ANIM.SMOOTH, {Transparency = 0.4}):Play()
		end)
		
		spamBtn.MouseButton1Click:Connect(function()
			spamBtn.Text = "SPAMMING..."
			spamBtn.BackgroundColor3 = COLORS.WARNING
			
			spawn(function()
				spamAdminCommands(plr.Name)
				task.wait(0.5)
				if spamBtn and spamBtn.Parent then
					spamBtn.Text = "DONE!"
					spamBtn.BackgroundColor3 = COLORS.SUCCESS
					task.wait(2)
					if spamBtn and spamBtn.Parent then
						spamBtn.Text = "SPAM"
						spamBtn.BackgroundColor3 = COLORS.DANGER
					end
				end
			end)
		end)
	end
	
	-- Add players
	for _, plr in pairs(Players:GetPlayers()) do
		createPlayerEntry(plr)
	end
	
	Players.PlayerAdded:Connect(function(plr)
		if adminSpammerMenu and adminSpammerMenu.Parent then
			createPlayerEntry(plr)
		end
	end)
	
	Players.PlayerRemoving:Connect(function(plr)
		if adminSpammerMenu and playerListFrame:FindFirstChild(plr.Name) then
			playerListFrame:FindFirstChild(plr.Name):Destroy()
		end
	end)
	
	-- Animate open
	TweenService:Create(adminSpammerMenu, TweenInfo.new(0.6, Enum.EasingStyle.Back, Enum.EasingDirection.Out), {
		Size = UDim2.fromOffset(360, 650),
		Position = UDim2.new(1, -380, 0.5, -325)
	}):Play()
end

-- SPEED BOOST
local isSpeedBoostOpen = false
local speedBoostMenu = nil
local currentSpeed = 25
local currentJumpPower = 45
local speedBoostEnabled = false
local speedConnections = {}

local function clearSpeedConnections()
	for _, connection in pairs(speedConnections) do
		if connection and typeof(connection) == "RBXScriptConnection" then
			connection:Disconnect()
		end
	end
	speedConnections = {}
end

local function applySpeedBoost(speed, jumpPower)
	local char = player.Character
	if char then
		local humanoid = char:FindFirstChildOfClass("Humanoid")
		if humanoid then
			humanoid.WalkSpeed = speed
			if humanoid.UseJumpPower == false then
				humanoid.UseJumpPower = true
			end
			humanoid.JumpPower = jumpPower
			print(string.format("‚úÖ Speed: %d | Jump: %d", speed, jumpPower))
			return true
		end
	end
	return false
end

local function setupStealthSpeedProtection()
	clearSpeedConnections()
	
	local char = player.Character
	if not char then return end
	
	local humanoid = char:FindFirstChildOfClass("Humanoid")
	if not humanoid then return end
	
	humanoid.WalkSpeed = currentSpeed
	if humanoid.UseJumpPower == false then
		humanoid.UseJumpPower = true
	end
	humanoid.JumpPower = currentJumpPower
	
	local walkSpeedConnection = humanoid:GetPropertyChangedSignal("WalkSpeed"):Connect(function()
		if speedBoostEnabled then
			task.wait(0.05)
			if humanoid.WalkSpeed ~= currentSpeed then
				humanoid.WalkSpeed = currentSpeed
			end
		end
	end)
	table.insert(speedConnections, walkSpeedConnection)
	
	local jumpConnection = humanoid:GetPropertyChangedSignal("JumpPower"):Connect(function()
		if speedBoostEnabled then
			task.wait(0.05)
			if humanoid.JumpPower ~= currentJumpPower then
				humanoid.JumpPower = currentJumpPower
			end
		end
	end)
	table.insert(speedConnections, jumpConnection)
end

local function createSpeedBoostMenu()
	if speedBoostMenu then speedBoostMenu:Destroy() end
	
	speedBoostMenu = Instance.new("Frame", gui)
	speedBoostMenu.Size = UDim2.fromOffset(0, 450)
	speedBoostMenu.Position = UDim2.new(1, 50, 0.5, -225)
	speedBoostMenu.BackgroundColor3 = COLORS.BG_GLASS
	speedBoostMenu.BackgroundTransparency = 0.12
	speedBoostMenu.BorderSizePixel = 0
	speedBoostMenu.ClipsDescendants = true
	speedBoostMenu.Active = true
	speedBoostMenu.ZIndex = 100
	
	local menuCorner = Instance.new("UICorner", speedBoostMenu)
	menuCorner.CornerRadius = UDim.new(0, 24)
	
	local menuStroke = Instance.new("UIStroke", speedBoostMenu)
	menuStroke.Color = COLORS.ACCENT
	menuStroke.Thickness = 2
	menuStroke.Transparency = 0.25
	
	-- Menu glow
	local menuGlow = Instance.new("ImageLabel", speedBoostMenu)
	menuGlow.Size = UDim2.fromScale(1.02, 1.02)
	menuGlow.Position = UDim2.fromScale(0.5, 0.5)
	menuGlow.AnchorPoint = Vector2.new(0.5, 0.5)
	menuGlow.BackgroundTransparency = 1
	menuGlow.Image = "rbxassetid://5028857084"
	menuGlow.ImageColor3 = COLORS.ACCENT
	menuGlow.ImageTransparency = 0.5
	menuGlow.ScaleType = Enum.ScaleType.Slice
	menuGlow.SliceCenter = Rect.new(24, 24, 276, 276)
	menuGlow.ZIndex = 99
	
	-- Draggable
	local dragging, dragStart, startPos
	
	speedBoostMenu.InputBegan:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseButton1 then
			dragging = true
			dragStart = input.Position
			startPos = speedBoostMenu.Position
			
			input.Changed:Connect(function()
				if input.UserInputState == Enum.UserInputState.End then
					dragging = false
				end
			end)
		end
	end)
	
	UserInputService.InputChanged:Connect(function(input)
		if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
			local delta = input.Position - dragStart
			speedBoostMenu.Position = UDim2.new(
				startPos.X.Scale, startPos.X.Offset + delta.X,
				startPos.Y.Scale, startPos.Y.Offset + delta.Y
			)
		end
	end)
	
	-- Header
	local header = Instance.new("Frame", speedBoostMenu)
	header.Size = UDim2.fromOffset(360, 90)
	header.BackgroundColor3 = COLORS.BG_CARD
	header.BackgroundTransparency = 0.3
	header.BorderSizePixel = 0
	header.ZIndex = 102
	
	local headerCorner = Instance.new("UICorner", header)
	headerCorner.CornerRadius = UDim.new(0, 24)
	
	-- Header gradient
	local headerGrad = Instance.new("Frame", header)
	headerGrad.Size = UDim2.fromScale(1, 0.5)
	headerGrad.BackgroundColor3 = COLORS.PRIMARY_GLOW
	headerGrad.BackgroundTransparency = 0.9
	headerGrad.BorderSizePixel = 0
	
	local headerGradCorner = Instance.new("UICorner", headerGrad)
	headerGradCorner.CornerRadius = UDim.new(0, 24)
	
	local headerGradGrad = Instance.new("UIGradient", headerGrad)
	headerGradGrad.Transparency = NumberSequence.new({
		NumberSequenceKeypoint.new(0, 0),
		NumberSequenceKeypoint.new(1, 1)
	})
	headerGradGrad.Rotation = 90
	
	local headerIcon = Instance.new("TextLabel", header)
	headerIcon.Size = UDim2.fromOffset(55, 55)
	headerIcon.Position = UDim2.fromOffset(153, 8)
	headerIcon.BackgroundTransparency = 1
	headerIcon.Text = "üöÄ"
	headerIcon.Font = Enum.Font.GothamBold
	headerIcon.TextSize = 44
	headerIcon.ZIndex = 103
	
	local headerTitle = Instance.new("TextLabel", header)
	headerTitle.Size = UDim2.fromOffset(340, 22)
	headerTitle.Position = UDim2.fromOffset(10, 64)
	headerTitle.BackgroundTransparency = 1
	headerTitle.Text = "SPEED BOOST"
	headerTitle.Font = Enum.Font.GothamBold
	headerTitle.TextSize = 17
	headerTitle.TextColor3 = COLORS.TEXT
	headerTitle.ZIndex = 103
	
	-- Content container
	local content = Instance.new("Frame", speedBoostMenu)
	content.Size = UDim2.fromOffset(340, 340)
	content.Position = UDim2.fromOffset(10, 100)
	content.BackgroundTransparency = 1
	content.ZIndex = 102
	
	-- Toggle container
	local toggleContainer = Instance.new("Frame", content)
	toggleContainer.Size = UDim2.fromOffset(340, 68)
	toggleContainer.Position = UDim2.fromOffset(0, 0)
	toggleContainer.BackgroundColor3 = COLORS.BG_CARD
	toggleContainer.BackgroundTransparency = 0.35
	toggleContainer.BorderSizePixel = 0
	toggleContainer.ZIndex = 103
	
	local toggleCorner = Instance.new("UICorner", toggleContainer)
	toggleCorner.CornerRadius = UDim.new(0, 14)
	
	local toggleStroke = Instance.new("UIStroke", toggleContainer)
	toggleStroke.Color = COLORS.PRIMARY
	toggleStroke.Thickness = 1.5
	toggleStroke.Transparency = 0.65
	
	local toggleLabel = Instance.new("TextLabel", toggleContainer)
	toggleLabel.Size = UDim2.fromOffset(220, 68)
	toggleLabel.Position = UDim2.fromOffset(15, 0)
	toggleLabel.BackgroundTransparency = 1
	toggleLabel.Text = "‚ö° ENABLE BOOST"
	toggleLabel.Font = Enum.Font.GothamBold
	toggleLabel.TextSize = 16
	toggleLabel.TextColor3 = COLORS.TEXT
	toggleLabel.TextXAlignment = Enum.TextXAlignment.Left
	toggleLabel.ZIndex = 104
	
	local toggleBtn = Instance.new("TextButton", toggleContainer)
	toggleBtn.Size = UDim2.fromOffset(88, 40)
	toggleBtn.Position = UDim2.fromOffset(238, 14)
	toggleBtn.BackgroundColor3 = COLORS.BG_GLASS
	toggleBtn.BorderSizePixel = 0
	toggleBtn.Text = ""
	toggleBtn.AutoButtonColor = false
	toggleBtn.ZIndex = 104
	
	local toggleBtnCorner = Instance.new("UICorner", toggleBtn)
	toggleBtnCorner.CornerRadius = UDim.new(1, 0)
	
	local toggleBtnStroke = Instance.new("UIStroke", toggleBtn)
	toggleBtnStroke.Color = COLORS.TEXT_DARK
	toggleBtnStroke.Thickness = 2
	toggleBtnStroke.Transparency = 0.5
	
	local toggleCircle = Instance.new("Frame", toggleBtn)
	toggleCircle.Size = UDim2.fromOffset(32, 32)
	toggleCircle.Position = UDim2.fromOffset(4, 4)
	toggleCircle.BackgroundColor3 = COLORS.TEXT_MUTED
	toggleCircle.BorderSizePixel = 0
	toggleCircle.ZIndex = 105
	
	local circleCorner = Instance.new("UICorner", toggleCircle)
	circleCorner.CornerRadius = UDim.new(1, 0)
	
	-- Circle glow
	local circleGlow = Instance.new("ImageLabel", toggleCircle)
	circleGlow.Size = UDim2.fromScale(1.6, 1.6)
	circleGlow.Position = UDim2.fromScale(0.5, 0.5)
	circleGlow.AnchorPoint = Vector2.new(0.5, 0.5)
	circleGlow.BackgroundTransparency = 1
	circleGlow.Image = "rbxassetid://5028857084"
	circleGlow.ImageColor3 = COLORS.PRIMARY
	circleGlow.ImageTransparency = 1
	circleGlow.ScaleType = Enum.ScaleType.Slice
	circleGlow.SliceCenter = Rect.new(24, 24, 276, 276)
	circleGlow.ZIndex = 104
	
	local function updateToggle(enabled)
		speedBoostEnabled = enabled
		
		if enabled then
			TweenService:Create(toggleBtn, ANIM.SMOOTH, {BackgroundColor3 = COLORS.PRIMARY}):Play()
			TweenService:Create(toggleBtnStroke, ANIM.SMOOTH, {Color = COLORS.PRIMARY_LIGHT, Transparency = 0.2}):Play()
			TweenService:Create(toggleCircle, ANIM.ELASTIC, {
				Position = UDim2.fromOffset(52, 4),
				BackgroundColor3 = COLORS.TEXT
			}):Play()
			TweenService:Create(circleGlow, ANIM.SMOOTH, {ImageTransparency = 0.4}):Play()
			
			applySpeedBoost(currentSpeed, currentJumpPower)
			setupStealthSpeedProtection()
		else
			TweenService:Create(toggleBtn, ANIM.SMOOTH, {BackgroundColor3 = COLORS.BG_GLASS}):Play()
			TweenService:Create(toggleBtnStroke, ANIM.SMOOTH, {Color = COLORS.TEXT_DARK, Transparency = 0.5}):Play()
			TweenService:Create(toggleCircle, ANIM.ELASTIC, {
				Position = UDim2.fromOffset(4, 4),
				BackgroundColor3 = COLORS.TEXT_MUTED
			}):Play()
			TweenService:Create(circleGlow, ANIM.SMOOTH, {ImageTransparency = 1}):Play()
			
			clearSpeedConnections()
			local char = player.Character
			if char then
				local humanoid = char:FindFirstChildOfClass("Humanoid")
				if humanoid then
					humanoid.WalkSpeed = 16
					humanoid.JumpPower = 50
				end
			end
		end
	end
	
	toggleBtn.MouseButton1Click:Connect(function()
		updateToggle(not speedBoostEnabled)
	end)
	
	updateToggle(speedBoostEnabled)
	
	-- Speed input
	local speedLabel = Instance.new("TextLabel", content)
	speedLabel.Size = UDim2.fromOffset(340, 28)
	speedLabel.Position = UDim2.fromOffset(0, 88)
	speedLabel.BackgroundTransparency = 1
	speedLabel.Text = "‚ö° SPEED"
	speedLabel.Font = Enum.Font.GothamBold
	speedLabel.TextSize = 15
	speedLabel.TextColor3 = COLORS.TEXT
	speedLabel.TextXAlignment = Enum.TextXAlignment.Left
	speedLabel.ZIndex = 103
	
	local speedBox = Instance.new("TextBox", content)
	speedBox.Size = UDim2.fromOffset(340, 56)
	speedBox.Position = UDim2.fromOffset(0, 120)
	speedBox.BackgroundColor3 = COLORS.BG_CARD
	speedBox.BackgroundTransparency = 0.35
	speedBox.BorderSizePixel = 0
	speedBox.Text = tostring(currentSpeed)
	speedBox.PlaceholderText = "Enter speed"
	speedBox.Font = Enum.Font.GothamBold
	speedBox.TextSize = 17
	speedBox.TextColor3 = COLORS.TEXT
	speedBox.ZIndex = 103
	speedBox.ClearTextOnFocus = false
	
	local speedBoxCorner = Instance.new("UICorner", speedBox)
	speedBoxCorner.CornerRadius = UDim.new(0, 14)
	
	local speedBoxStroke = Instance.new("UIStroke", speedBox)
	speedBoxStroke.Color = COLORS.PRIMARY
	speedBoxStroke.Thickness = 1.5
	speedBoxStroke.Transparency = 0.65
	
	speedBox.Focused:Connect(function()
		TweenService:Create(speedBoxStroke, ANIM.SMOOTH, {Transparency = 0.3, Color = COLORS.ACCENT}):Play()
	end)
	
	speedBox.FocusLost:Connect(function()
		TweenService:Create(speedBoxStroke, ANIM.SMOOTH, {Transparency = 0.65, Color = COLORS.PRIMARY}):Play()
		
		local speedValue = tonumber(speedBox.Text)
		if speedValue and speedValue > 0 then
			currentSpeed = speedValue
			if speedBoostEnabled then
				applySpeedBoost(currentSpeed, currentJumpPower)
				setupStealthSpeedProtection()
			end
		else
			speedBox.Text = tostring(currentSpeed)
		end
	end)
	
	-- Jump input
	local jumpLabel = Instance.new("TextLabel", content)
	jumpLabel.Size = UDim2.fromOffset(340, 28)
	jumpLabel.Position = UDim2.fromOffset(0, 196)
	jumpLabel.BackgroundTransparency = 1
	jumpLabel.Text = "ü¶ò JUMP POWER"
	jumpLabel.Font = Enum.Font.GothamBold
	jumpLabel.TextSize = 15
	jumpLabel.TextColor3 = COLORS.TEXT
	jumpLabel.TextXAlignment = Enum.TextXAlignment.Left
	jumpLabel.ZIndex = 103
	
	local jumpBox = Instance.new("TextBox", content)
	jumpBox.Size = UDim2.fromOffset(340, 56)
	jumpBox.Position = UDim2.fromOffset(0, 228)
	jumpBox.BackgroundColor3 = COLORS.BG_CARD
	jumpBox.BackgroundTransparency = 0.35
	jumpBox.BorderSizePixel = 0
	jumpBox.Text = tostring(currentJumpPower)
	jumpBox.PlaceholderText = "Enter jump power"
	jumpBox.Font = Enum.Font.GothamBold
	jumpBox.TextSize = 17
	jumpBox.TextColor3 = COLORS.TEXT
	jumpBox.ZIndex = 103
	jumpBox.ClearTextOnFocus = false
	
	local jumpBoxCorner = Instance.new("UICorner", jumpBox)
	jumpBoxCorner.CornerRadius = UDim.new(0, 14)
	
	local jumpBoxStroke = Instance.new("UIStroke", jumpBox)
	jumpBoxStroke.Color = COLORS.PRIMARY
	jumpBoxStroke.Thickness = 1.5
	jumpBoxStroke.Transparency = 0.65
	
	jumpBox.Focused:Connect(function()
		TweenService:Create(jumpBoxStroke, ANIM.SMOOTH, {Transparency = 0.3, Color = COLORS.ACCENT}):Play()
	end)
	
	jumpBox.FocusLost:Connect(function()
		TweenService:Create(jumpBoxStroke, ANIM.SMOOTH, {Transparency = 0.65, Color = COLORS.PRIMARY}):Play()
		
		local jumpValue = tonumber(jumpBox.Text)
		if jumpValue and jumpValue > 0 then
			currentJumpPower = jumpValue
			if speedBoostEnabled then
				applySpeedBoost(currentSpeed, currentJumpPower)
				setupStealthSpeedProtection()
			end
		else
			jumpBox.Text = tostring(currentJumpPower)
		end
	end)
	
	-- Animate open
	TweenService:Create(speedBoostMenu, TweenInfo.new(0.6, Enum.EasingStyle.Back, Enum.EasingDirection.Out), {
		Size = UDim2.fromOffset(360, 450),
		Position = UDim2.new(1, -380, 0.5, -225)
	}):Play()
end

player.CharacterAdded:Connect(function(char)
	task.wait(0.5)
	if speedBoostEnabled then
		applySpeedBoost(currentSpeed, currentJumpPower)
		task.wait(0.1)
		setupStealthSpeedProtection()
	end
end)



-- Create world action cards
local adminCard, adminBtn = createActionCard(
	"ADMIN COMMAND SPAMMER",
	"Spam all admin commands on any player",
	"‚ö°",
	worldContent,
	function(btn)
		if isAdminSpammerOpen then
			if adminSpammerMenu then
				TweenService:Create(adminSpammerMenu, ANIM.SMOOTH, {
					Position = UDim2.new(1, 50, 0.5, -325),
					Size = UDim2.fromOffset(0, 650)
				}):Play()
				task.wait(0.4)
				adminSpammerMenu:Destroy()
				adminSpammerMenu = nil
			end
			isAdminSpammerOpen = false
			btn.Text = "‚ñ∂"
		else
			createAdminSpammerMenu()
			isAdminSpammerOpen = true
			btn.Text = "‚óÄ"
		end
	end
)

local speedCard, speedBtn = createActionCard(
	"DUCKY SPEED BOOST",
	"Customize your speed and jump power",
	"üöÄ",
	worldContent,
	function(btn)
		if isSpeedBoostOpen then
			if speedBoostMenu then
				TweenService:Create(speedBoostMenu, ANIM.SMOOTH, {
					Position = UDim2.new(1, 50, 0.5, -225),
					Size = UDim2.fromOffset(0, 450)
				}):Play()
				task.wait(0.4)
				speedBoostMenu:Destroy()
				speedBoostMenu = nil
			end
			isSpeedBoostOpen = false
			btn.Text = "‚ñ∂"
		else
			createSpeedBoostMenu()
			isSpeedBoostOpen = true
			btn.Text = "‚óÄ"
		end
	end
)


--======================
-- STEAL/SETTINGS SECTIONS
--======================






-- Set default section with enhanced animation
espSection.Visible = true
currentSection = espSection
currentNavButton = espNavBtn

TweenService:Create(espNavBtn, ANIM.SMOOTH, {BackgroundTransparency = 0.15}):Play()
local espStroke = espNavBtn:FindFirstChild("UIStroke")
if espStroke then
	espStroke.Color = COLORS.ACCENT
	espStroke.Transparency = 0.25
end
local hoverGlow = nil
for _, child in pairs(espNavBtn:GetChildren()) do
	if child:IsA("Frame") and child.Name ~= "Frame" then
		hoverGlow = child
		break
	end
end
if hoverGlow then
	TweenService:Create(hoverGlow, ANIM.SMOOTH, {BackgroundTransparency = 0.7}):Play()
end
for _, child in pairs(espNavBtn:GetChildren()) do
	if child:IsA("TextLabel") then
		child.TextColor3 = child.Text:match("^[%w]") and COLORS.TEXT or COLORS.ACCENT_LIGHT
		if child.Text:match("^[%w]") == nil then child.TextSize = 34 end
	elseif child:IsA("Frame") and child.Name == "Frame" then
		child.Size = UDim2.fromOffset(5, 62)
		child.BackgroundColor3 = COLORS.ACCENT
	end
end

-- Premium entrance animation
main.Size = UDim2.fromOffset(0, 0)
main.Position = UDim2.new(0.5, 0, 0.5, 0)
main.BackgroundTransparency = 1

-- ... (rest stays same until final tween)

TweenService:Create(main, TweenInfo.new(0.7, Enum.EasingStyle.Back, Enum.EasingDirection.Out), {
	Size = UDim2.fromOffset(720, 480),  -- Changed from 920, 620
	Position = UDim2.new(0.5, -360, 0.5, -240),  -- Changed from -460, -310
	BackgroundTransparency = 0.12
}):Play()

task.wait(0.2)

for _, child in pairs(main:GetDescendants()) do
	if child:IsA("TextLabel") or child:IsA("TextButton") then
		TweenService:Create(child, TweenInfo.new(0.5), {TextTransparency = 0}):Play()
	elseif child:IsA("Frame") or child:IsA("ImageLabel") then
		local targetTrans = 1
		if child.Name == "glassLayer1" then
			targetTrans = 0.94
		elseif child.Name == "glassLayer2" then
			targetTrans = 0.92
		elseif child.BackgroundColor3 == COLORS.BG_GLASS or child.BackgroundColor3 == COLORS.BG_CARD then
			targetTrans = child.Name:find("container") and 0.4 or 0.3
		end
		if targetTrans < 1 then
			TweenService:Create(child, TweenInfo.new(0.5), {BackgroundTransparency = targetTrans}):Play()
		end
	elseif child:IsA("UIStroke") then
		local targetTrans = child.Parent.Name:find("NavButton") and 0.75 or 0.65
		TweenService:Create(child, TweenInfo.new(0.5), {Transparency = targetTrans}):Play()
	end
end

print("‚úÖ Ducky Hub v1 ULTRA SLICK loaded!")
print("üé® Enhanced glassmorphism design")
print("‚ú® Premium animations and effects")
print("üåü All features preserved and enhanced")

--======================
-- HOTKEY SYSTEM
--======================
local currentHotkey = Enum.KeyCode.Tab -- Default hotkey
local isConfiguringHotkey = false
local hotkeyMenuOpen = false
local hotkeyMenu = nil

-- Load saved hotkey
local function loadHotkey()
	pcall(function()
		if readfile and isfile and isfile("DuckyHub_Hotkey.txt") then
			local savedKey = readfile("DuckyHub_Hotkey.txt")
			local keyCode = Enum.KeyCode[savedKey]
			if keyCode then
				currentHotkey = keyCode
				print("üîë Loaded hotkey: " .. savedKey)
			end
		end
	end)
end

-- Save hotkey
local function saveHotkey(keyCode)
	pcall(function()
		if writefile then
			writefile("DuckyHub_Hotkey.txt", keyCode.Name)
			print("üíæ Hotkey saved: " .. keyCode.Name)
		end
	end)
end

-- Toggle main menu visibility
local function toggleMainMenu()
	if main.Visible then
		TweenService:Create(main, ANIM.SMOOTH, {
			Size = UDim2.fromOffset(620, 420),
			Position = UDim2.new(0.5, -310, 0.5, -210),
			BackgroundTransparency = 1
		}):Play()
		
		for _, child in pairs(main:GetDescendants()) do
			pcall(function()
				if child:IsA("TextLabel") or child:IsA("TextButton") then
					TweenService:Create(child, TweenInfo.new(0.3), {TextTransparency = 1}):Play()
				elseif child:IsA("Frame") or child:IsA("ImageLabel") then
					TweenService:Create(child, TweenInfo.new(0.3), {
						BackgroundTransparency = 1,
						ImageTransparency = 1
					}):Play()
				elseif child:IsA("UIStroke") then
					TweenService:Create(child, TweenInfo.new(0.3), {Transparency = 1}):Play()
				end
			end)
		end
		
		task.wait(0.3)
		main.Visible = false
	else
		main.Visible = true
		main.Size = UDim2.fromOffset(0, 0)
		main.Position = UDim2.new(0.5, 0, 0.5, 0)
		main.BackgroundTransparency = 1
		
		TweenService:Create(main, TweenInfo.new(0.5, Enum.EasingStyle.Back, Enum.EasingDirection.Out), {
			Size = UDim2.fromOffset(720, 480),
			Position = UDim2.new(0.5, -360, 0.5, -240),
			BackgroundTransparency = 0.12
		}):Play()
		
		task.wait(0.2)
		
		for _, child in pairs(main:GetDescendants()) do
			pcall(function()
				if child:IsA("TextLabel") or child:IsA("TextButton") then
					TweenService:Create(child, TweenInfo.new(0.4), {TextTransparency = 0}):Play()
				elseif child:IsA("Frame") or child:IsA("ImageLabel") then
					local targetTrans = 1
					if child.Name == "glassLayer1" then
						targetTrans = 0.94
					elseif child.Name == "glassLayer2" then
						targetTrans = 0.92
					elseif child.BackgroundColor3 == COLORS.BG_GLASS or child.BackgroundColor3 == COLORS.BG_CARD then
						targetTrans = 0.3
					end
					if targetTrans < 1 then
						TweenService:Create(child, TweenInfo.new(0.4), {BackgroundTransparency = targetTrans}):Play()
					end
				elseif child:IsA("UIStroke") then
					local targetTrans = 0.65
					TweenService:Create(child, TweenInfo.new(0.4), {Transparency = targetTrans}):Play()
				end
			end)
		end
	end
end

-- Create hotkey configuration menu
local function createHotkeyMenu()
	if hotkeyMenu then hotkeyMenu:Destroy() end
	
	hotkeyMenu = Instance.new("Frame", gui)
	hotkeyMenu.Size = UDim2.fromOffset(0, 400)
	hotkeyMenu.Position = UDim2.new(1, 50, 0.5, -200)
	hotkeyMenu.BackgroundColor3 = COLORS.BG_GLASS
	hotkeyMenu.BackgroundTransparency = 0.12
	hotkeyMenu.BorderSizePixel = 0
	hotkeyMenu.ClipsDescendants = true
	hotkeyMenu.Active = true
	hotkeyMenu.ZIndex = 100
	
	local menuCorner = Instance.new("UICorner", hotkeyMenu)
	menuCorner.CornerRadius = UDim.new(0, 24)
	
	local menuStroke = Instance.new("UIStroke", hotkeyMenu)
	menuStroke.Color = COLORS.ACCENT
	menuStroke.Thickness = 2
	menuStroke.Transparency = 0.25
	
	-- Menu glow
	local menuGlow = Instance.new("ImageLabel", hotkeyMenu)
	menuGlow.Size = UDim2.fromScale(1.02, 1.02)
	menuGlow.Position = UDim2.fromScale(0.5, 0.5)
	menuGlow.AnchorPoint = Vector2.new(0.5, 0.5)
	menuGlow.BackgroundTransparency = 1
	menuGlow.Image = "rbxassetid://5028857084"
	menuGlow.ImageColor3 = COLORS.ACCENT
	menuGlow.ImageTransparency = 0.5
	menuGlow.ScaleType = Enum.ScaleType.Slice
	menuGlow.SliceCenter = Rect.new(24, 24, 276, 276)
	menuGlow.ZIndex = 99
	
	-- Pulsing glow animation
	spawn(function()
		while hotkeyMenu and hotkeyMenu.Parent do
			TweenService:Create(menuGlow, TweenInfo.new(2, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut), {
				ImageTransparency = 0.7,
				ImageColor3 = COLORS.PRIMARY_GLOW
			}):Play()
			task.wait(2)
			if not hotkeyMenu or not hotkeyMenu.Parent then break end
			TweenService:Create(menuGlow, TweenInfo.new(2, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut), {
				ImageTransparency = 0.5,
				ImageColor3 = COLORS.ACCENT
			}):Play()
			task.wait(2)
		end
	end)
	
	-- Draggable
	local dragging, dragStart, startPos
	
	hotkeyMenu.InputBegan:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseButton1 then
			dragging = true
			dragStart = input.Position
			startPos = hotkeyMenu.Position
			
			input.Changed:Connect(function()
				if input.UserInputState == Enum.UserInputState.End then
					dragging = false
				end
			end)
		end
	end)
	
	UserInputService.InputChanged:Connect(function(input)
		if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
			local delta = input.Position - dragStart
			hotkeyMenu.Position = UDim2.new(
				startPos.X.Scale, startPos.X.Offset + delta.X,
				startPos.Y.Scale, startPos.Y.Offset + delta.Y
			)
		end
	end)
	
	-- Header
	local header = Instance.new("Frame", hotkeyMenu)
	header.Size = UDim2.fromOffset(360, 90)
	header.BackgroundColor3 = COLORS.BG_CARD
	header.BackgroundTransparency = 0.3
	header.BorderSizePixel = 0
	header.ZIndex = 102
	
	local headerCorner = Instance.new("UICorner", header)
	headerCorner.CornerRadius = UDim.new(0, 24)
	
	-- Header gradient
	local headerGrad = Instance.new("Frame", header)
	headerGrad.Size = UDim2.fromScale(1, 0.5)
	headerGrad.BackgroundColor3 = COLORS.ACCENT
	headerGrad.BackgroundTransparency = 0.9
	headerGrad.BorderSizePixel = 0
	
	local headerGradCorner = Instance.new("UICorner", headerGrad)
	headerGradCorner.CornerRadius = UDim.new(0, 24)
	
	local headerGradGrad = Instance.new("UIGradient", headerGrad)
	headerGradGrad.Transparency = NumberSequence.new({
		NumberSequenceKeypoint.new(0, 0),
		NumberSequenceKeypoint.new(1, 1)
	})
	headerGradGrad.Rotation = 90
	
	local headerIcon = Instance.new("TextLabel", header)
	headerIcon.Size = UDim2.fromOffset(55, 55)
	headerIcon.Position = UDim2.fromOffset(153, 8)
	headerIcon.BackgroundTransparency = 1
	headerIcon.Text = "‚å®Ô∏è"
	headerIcon.Font = Enum.Font.GothamBold
	headerIcon.TextSize = 44
	headerIcon.ZIndex = 103
	
	local headerTitle = Instance.new("TextLabel", header)
	headerTitle.Size = UDim2.fromOffset(340, 22)
	headerTitle.Position = UDim2.fromOffset(10, 64)
	headerTitle.BackgroundTransparency = 1
	headerTitle.Text = "HOTKEY CONFIG"
	headerTitle.Font = Enum.Font.GothamBold
	headerTitle.TextSize = 17
	headerTitle.TextColor3 = COLORS.TEXT
	headerTitle.ZIndex = 103
	
	-- Content
	local content = Instance.new("Frame", hotkeyMenu)
	content.Size = UDim2.fromOffset(340, 290)
	content.Position = UDim2.fromOffset(10, 100)
	content.BackgroundTransparency = 1
	content.ZIndex = 102
	
	-- Current hotkey display
	local currentContainer = Instance.new("Frame", content)
	currentContainer.Size = UDim2.fromOffset(340, 100)
	currentContainer.BackgroundColor3 = COLORS.BG_CARD
	currentContainer.BackgroundTransparency = 0.35
	currentContainer.BorderSizePixel = 0
	currentContainer.ZIndex = 103
	
	local currentCorner = Instance.new("UICorner", currentContainer)
	currentCorner.CornerRadius = UDim.new(0, 16)
	
	local currentStroke = Instance.new("UIStroke", currentContainer)
	currentStroke.Color = COLORS.PRIMARY
	currentStroke.Thickness = 1.5
	currentStroke.Transparency = 0.65
	
	local currentLabel = Instance.new("TextLabel", currentContainer)
	currentLabel.Size = UDim2.fromOffset(320, 24)
	currentLabel.Position = UDim2.fromOffset(10, 12)
	currentLabel.BackgroundTransparency = 1
	currentLabel.Text = "üîë CURRENT HOTKEY"
	currentLabel.Font = Enum.Font.GothamBold
	currentLabel.TextSize = 14
	currentLabel.TextColor3 = COLORS.TEXT_MUTED
	currentLabel.ZIndex = 104
	
	local hotkeyDisplay = Instance.new("Frame", currentContainer)
	hotkeyDisplay.Size = UDim2.fromOffset(320, 50)
	hotkeyDisplay.Position = UDim2.fromOffset(10, 42)
	hotkeyDisplay.BackgroundColor3 = COLORS.BG_GLASS
	hotkeyDisplay.BackgroundTransparency = 0.3
	hotkeyDisplay.BorderSizePixel = 0
	hotkeyDisplay.ZIndex = 104
	
	local displayCorner = Instance.new("UICorner", hotkeyDisplay)
	displayCorner.CornerRadius = UDim.new(0, 12)
	
	local displayStroke = Instance.new("UIStroke", hotkeyDisplay)
	displayStroke.Color = COLORS.ACCENT
	displayStroke.Thickness = 2
	displayStroke.Transparency = 0.4
	
	local hotkeyText = Instance.new("TextLabel", hotkeyDisplay)
	hotkeyText.Size = UDim2.fromScale(1, 1)
	hotkeyText.BackgroundTransparency = 1
	hotkeyText.Text = currentHotkey.Name
	hotkeyText.Font = Enum.Font.GothamBold
	hotkeyText.TextSize = 22
	hotkeyText.TextColor3 = COLORS.ACCENT
	hotkeyText.ZIndex = 105
	
	-- Pulsing text animation
	spawn(function()
		while hotkeyMenu and hotkeyMenu.Parent and hotkeyText.Parent do
			TweenService:Create(hotkeyText, TweenInfo.new(1.5, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut), {
				TextSize = 24,
				TextColor3 = COLORS.ACCENT_LIGHT
			}):Play()
			task.wait(1.5)
			if not hotkeyMenu or not hotkeyMenu.Parent then break end
			TweenService:Create(hotkeyText, TweenInfo.new(1.5, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut), {
				TextSize = 22,
				TextColor3 = COLORS.ACCENT
			}):Play()
			task.wait(1.5)
		end
	end)
	
	-- Change hotkey button
	local changeBtn = Instance.new("TextButton", content)
	changeBtn.Size = UDim2.fromOffset(340, 60)
	changeBtn.Position = UDim2.fromOffset(0, 120)
	changeBtn.BackgroundColor3 = COLORS.PRIMARY
	changeBtn.BackgroundTransparency = 0.15
	changeBtn.Text = "üîÑ CHANGE HOTKEY"
	changeBtn.Font = Enum.Font.GothamBold
	changeBtn.TextSize = 16
	changeBtn.TextColor3 = COLORS.TEXT
	changeBtn.BorderSizePixel = 0
	changeBtn.AutoButtonColor = false
	changeBtn.ZIndex = 103
	
	local changeBtnCorner = Instance.new("UICorner", changeBtn)
	changeBtnCorner.CornerRadius = UDim.new(0, 14)
	
	local changeBtnStroke = Instance.new("UIStroke", changeBtn)
	changeBtnStroke.Color = COLORS.PRIMARY
	changeBtnStroke.Thickness = 2
	changeBtnStroke.Transparency = 0.4
	
	-- Button glow
	local btnGlow = Instance.new("ImageLabel", changeBtn)
	btnGlow.Size = UDim2.fromScale(1.05, 1.05)
	btnGlow.Position = UDim2.fromScale(0.5, 0.5)
	btnGlow.AnchorPoint = Vector2.new(0.5, 0.5)
	btnGlow.BackgroundTransparency = 1
	btnGlow.Image = "rbxassetid://5028857084"
	btnGlow.ImageColor3 = COLORS.PRIMARY
	btnGlow.ImageTransparency = 1
	btnGlow.ScaleType = Enum.ScaleType.Slice
	btnGlow.SliceCenter = Rect.new(24, 24, 276, 276)
	btnGlow.ZIndex = 102
	
	changeBtn.MouseEnter:Connect(function()
		TweenService:Create(changeBtn, ANIM.SMOOTH, {
			BackgroundTransparency = 0,
			Size = UDim2.fromOffset(345, 64)
		}):Play()
		TweenService:Create(changeBtnStroke, ANIM.SMOOTH, {
			Transparency = 0.2,
			Color = COLORS.ACCENT
		}):Play()
		TweenService:Create(btnGlow, ANIM.SMOOTH, {ImageTransparency = 0.5}):Play()
	end)
	
	changeBtn.MouseLeave:Connect(function()
		if not isConfiguringHotkey then
			TweenService:Create(changeBtn, ANIM.SMOOTH, {
				BackgroundTransparency = 0.15,
				Size = UDim2.fromOffset(340, 60)
			}):Play()
			TweenService:Create(changeBtnStroke, ANIM.SMOOTH, {
				Transparency = 0.4,
				Color = COLORS.PRIMARY
			}):Play()
			TweenService:Create(btnGlow, ANIM.SMOOTH, {ImageTransparency = 1}):Play()
		end
	end)
	
	changeBtn.MouseButton1Click:Connect(function()
		if isConfiguringHotkey then return end
		
		isConfiguringHotkey = true
		changeBtn.Text = "‚åõ PRESS ANY KEY..."
		TweenService:Create(changeBtn, ANIM.SMOOTH, {BackgroundColor3 = COLORS.WARNING}):Play()
		TweenService:Create(changeBtnStroke, ANIM.SMOOTH, {Color = COLORS.WARNING}):Play()
		
		local connection
		connection = UserInputService.InputBegan:Connect(function(input, gameProcessed)
			if input.UserInputType == Enum.UserInputType.Keyboard then
				local keyCode = input.KeyCode
				
				-- Ignore system keys
				if keyCode ~= Enum.KeyCode.Unknown and 
				   keyCode ~= Enum.KeyCode.LeftShift and 
				   keyCode ~= Enum.KeyCode.RightShift and
				   keyCode ~= Enum.KeyCode.LeftControl and
				   keyCode ~= Enum.KeyCode.RightControl and
				   keyCode ~= Enum.KeyCode.LeftAlt and
				   keyCode ~= Enum.KeyCode.RightAlt then
					
					currentHotkey = keyCode
					hotkeyText.Text = keyCode.Name
					saveHotkey(keyCode)
					
					changeBtn.Text = "‚úÖ HOTKEY UPDATED!"
					TweenService:Create(changeBtn, ANIM.SMOOTH, {BackgroundColor3 = COLORS.SUCCESS}):Play()
					TweenService:Create(changeBtnStroke, ANIM.SMOOTH, {Color = COLORS.SUCCESS}):Play()
					
					-- Flash animation
					TweenService:Create(hotkeyDisplay, ANIM.INSTANT, {BackgroundTransparency = 0}):Play()
					TweenService:Create(displayStroke, ANIM.INSTANT, {Transparency = 0}):Play()
					task.wait(0.1)
					TweenService:Create(hotkeyDisplay, ANIM.SMOOTH, {BackgroundTransparency = 0.3}):Play()
					TweenService:Create(displayStroke, ANIM.SMOOTH, {Transparency = 0.4}):Play()
					
					task.wait(1.5)
					if changeBtn and changeBtn.Parent then
						changeBtn.Text = "üîÑ CHANGE HOTKEY"
						TweenService:Create(changeBtn, ANIM.SMOOTH, {BackgroundColor3 = COLORS.PRIMARY}):Play()
						TweenService:Create(changeBtnStroke, ANIM.SMOOTH, {Color = COLORS.PRIMARY}):Play()
					end
					
					isConfiguringHotkey = false
					connection:Disconnect()
				end
			end
		end)
	end)
	
	-- Info text
	local infoText = Instance.new("TextLabel", content)
	infoText.Size = UDim2.fromOffset(340, 90)
	infoText.Position = UDim2.fromOffset(0, 195)
	infoText.BackgroundColor3 = COLORS.BG_CARD
	infoText.BackgroundTransparency = 0.35
	infoText.BorderSizePixel = 0
	infoText.Text = "üí° TIP\n\nPress your hotkey anytime to toggle the menu visibility. Your hotkey is automatically saved!"
	infoText.Font = Enum.Font.Gotham
	infoText.TextSize = 12
	infoText.TextColor3 = COLORS.TEXT_MUTED
	infoText.TextWrapped = true
	infoText.ZIndex = 103
	
	local infoCorner = Instance.new("UICorner", infoText)
	infoCorner.CornerRadius = UDim.new(0, 14)
	
	local infoStroke = Instance.new("UIStroke", infoText)
	infoStroke.Color = COLORS.PRIMARY
	infoStroke.Thickness = 1.5
	infoStroke.Transparency = 0.75
	
	-- Animate open
	TweenService:Create(hotkeyMenu, TweenInfo.new(0.6, Enum.EasingStyle.Back, Enum.EasingDirection.Out), {
		Size = UDim2.fromOffset(360, 400),
		Position = UDim2.new(1, -380, 0.5, -200)
	}):Play()
end

-- Hotkey listener
UserInputService.InputBegan:Connect(function(input, gameProcessed)
	if not gameProcessed and input.UserInputType == Enum.UserInputType.Keyboard then
		if input.KeyCode == currentHotkey and not isConfiguringHotkey then
			toggleMainMenu()
		end
	end
end)

-- Load saved hotkey on startup
loadHotkey()

-- Hotkey config button in settings
local hotkeyCard, hotkeyBtn = createActionCard(
	"HOTKEY CONFIG",
	"Configure your toggle menu hotkey (Default: Tab)",
	"‚å®Ô∏è",
	settingsContent,
	function(btn)
		if hotkeyMenuOpen then
			if hotkeyMenu then
				TweenService:Create(hotkeyMenu, ANIM.SMOOTH, {
					Position = UDim2.new(1, 50, 0.5, -200),
					Size = UDim2.fromOffset(0, 400)
				}):Play()
				task.wait(0.4)
				hotkeyMenu:Destroy()
				hotkeyMenu = nil
			end
			hotkeyMenuOpen = false
			btn.Text = "‚ñ∂"
		else
			createHotkeyMenu()
			hotkeyMenuOpen = true
			btn.Text = "‚óÄ"
		end
	end
)

--======================
-- AUTO SWING FOR WORLD SECTION
-- Automatically swings melee weapons
--======================

-- Auto swing state
local autoSwingEnabled = false
local swingConnection = nil

-- Melee weapon list
local MELEE_TOOLS = {"Bat", "Baseball Bat", "Katana", "Sword", "RainbowWrath Sword"}

-- Find tool in character or backpack
local function findTool(toolName)
	if player.Character then
		local tool = player.Character:FindFirstChild(toolName)
		if tool and tool:IsA("Tool") then
			return tool
		end
	end
	
	if player.Backpack then
		local tool = player.Backpack:FindFirstChild(toolName)
		if tool and tool:IsA("Tool") then
			return tool
		end
	end
	
	return nil
end

-- Equip a tool
local function equipTool(tool)
	if not player.Character then return false end
	local humanoid = player.Character:FindFirstChildOfClass("Humanoid")
	if not humanoid then return false end
	
	if tool.Parent == player.Backpack then
		humanoid:EquipTool(tool)
		task.wait(0.05)
		return true
	end
	
	return tool.Parent == player.Character
end

-- Auto swing function
local function performAutoSwing()
	if not autoSwingEnabled then return end
	if not player.Character then return end
	
	local humanoid = player.Character:FindFirstChildOfClass("Humanoid")
	if not humanoid then return end
	
	-- Try to find any melee weapon
	local tool = nil
	for _, weaponName in ipairs(MELEE_TOOLS) do
		tool = findTool(weaponName)
		if tool then break end
	end
	
	if not tool then return end
	
	-- Equip and activate
	if equipTool(tool) then
		tool:Activate()
	end
end

-- Create Auto Swing card in World section
local swingCard, swingBtn = createActionCard(
	"AUTO SWING",
	"Automatically swings melee weapons (Bat, Katana, Sword)",
	"‚öîÔ∏è",
	worldContent,
	function(btn)
		autoSwingEnabled = not autoSwingEnabled
		
		if autoSwingEnabled then
			btn.Text = "‚óº"
			btn.BackgroundColor3 = COLORS.SUCCESS
			print("‚öîÔ∏è Auto Swing: ON")
			
			-- Start auto swing loop
			if swingConnection then swingConnection:Disconnect() end
			swingConnection = RunService.Heartbeat:Connect(function()
				performAutoSwing()
				task.wait(0.4) -- Swing interval
			end)
		else
			btn.Text = "‚ñ∂"
			btn.BackgroundColor3 = COLORS.PRIMARY
			print("‚öîÔ∏è Auto Swing: OFF")
			
			-- Stop auto swing
			if swingConnection then
				swingConnection:Disconnect()
				swingConnection = nil
			end
		end
	end
)

-- Cleanup on respawn
player.CharacterAdded:Connect(function()
	task.wait(1)
	
	if autoSwingEnabled and swingConnection then
		swingConnection:Disconnect()
		swingConnection = RunService.Heartbeat:Connect(function()
			performAutoSwing()
			task.wait(0.4)
		end)
	end
end)

print("‚úÖ Auto Swing added to World tab!")

--======================
-- STEAL SECTION - EMPTY PLACEHOLDER
--======================

-- Remove old placeholder if exists
if stealInfo then stealInfo:Destroy() end

-- Create new placeholder for steal section
local stealPlaceholder = Instance.new("TextLabel", stealContent)
stealPlaceholder.Size = UDim2.fromOffset(485, 85)
stealPlaceholder.BackgroundColor3 = COLORS.BG_CARD
stealPlaceholder.BackgroundTransparency = 0.4
stealPlaceholder.BorderSizePixel = 0
stealPlaceholder.Text = "‚ö° INSTANT STEAL\n\nFeatures coming soon!"
stealPlaceholder.Font = Enum.Font.GothamBold
stealPlaceholder.TextSize = 15
stealPlaceholder.TextColor3 = COLORS.TEXT
stealPlaceholder.TextWrapped = true

local stealPlaceholderCorner = Instance.new("UICorner", stealPlaceholder)
stealPlaceholderCorner.CornerRadius = UDim.new(0, 13)

local stealPlaceholderStroke = Instance.new("UIStroke", stealPlaceholder)
stealPlaceholderStroke.Color = COLORS.PRIMARY
stealPlaceholderStroke.Thickness = 1.5
stealPlaceholderStroke.Transparency = 0.75

print("‚úÖ Steal section ready for new features!")

--======================
-- TP STEAL SECTION - ULTRA PREMIUM WITH HOTKEY CYCLING
-- Place markers and teleport to them with hotkey
--======================

-- Remove old placeholder
if stealPlaceholder then stealPlaceholder:Destroy() end

-- TP Steal state
local markers = {}
local maxMarkers = 10
local markerMenuOpen = false
local markerMenu = nil
local markerListFrame = nil
local counterText = nil

-- Hotkey cycling state
local cycleHotkey = Enum.KeyCode.One -- Default hotkey
local currentMarkerIndex = 0
local isHoldingCycle = false
local cycleConnection = nil
local hotkeyConfigOpen = false
local hotkeyConfigMenu = nil
local configuringCycleHotkey = false

-- Find ground position below point
local function findGroundPosition(position)
	local rayOrigin = position + Vector3.new(0, 10, 0)
	local rayDirection = Vector3.new(0, -100, 0)
	
	local raycastParams = RaycastParams.new()
	raycastParams.FilterType = Enum.RaycastFilterType.Blacklist
	raycastParams.FilterDescendantsInstances = {player.Character, workspace:FindFirstChild("DuckyMarkers")}
	
	local rayResult = workspace:Raycast(rayOrigin, rayDirection, raycastParams)
	
	if rayResult then
		return rayResult.Position
	else
		return position
	end
end

-- Equip Flying Carpet
local function equipFlyingCarpet()
	if not player.Character then return false end
	local humanoid = player.Character:FindFirstChildOfClass("Humanoid")
	if not humanoid then return false end
	
	-- Check if already equipped
	local currentTool = player.Character:FindFirstChildOfClass("Tool")
	if currentTool and currentTool.Name == "Flying Carpet" then
		return true
	end
	
	-- Find Flying Carpet in backpack
	local carpet = player.Backpack:FindFirstChild("Flying Carpet")
	if carpet and carpet:IsA("Tool") then
		humanoid:EquipTool(carpet)
		task.wait(0.05)
		return true
	end
	
	-- Also check character in case it's there but not equipped
	carpet = player.Character:FindFirstChild("Flying Carpet")
	if carpet and carpet:IsA("Tool") then
		humanoid:EquipTool(carpet)
		task.wait(0.05)
		return true
	end
	
	return false
end

-- Create a premium beam marker at player position (SIMPLIFIED)
local function createMarker(name, position)
	if #markers >= maxMarkers then
		warn("‚ùå Max markers reached (10)")
		return false
	end
	
	local groundPos = findGroundPosition(position)
	
	-- Create marker container
	local markerContainer = Instance.new("Model", workspace)
	markerContainer.Name = "DuckyMarker_" .. name
	
	-- Base platform
	local base = Instance.new("Part", markerContainer)
	base.Name = "Base"
	base.Size = Vector3.new(3, 0.4, 3)
	base.Position = groundPos + Vector3.new(0, 0.2, 0)
	base.Anchored = true
	base.CanCollide = false
	base.Material = Enum.Material.Neon
	base.Color = COLORS.ACCENT
	base.Transparency = 0.3
	
	local baseMesh = Instance.new("CylinderMesh", base)
	
	-- Simple vertical beam (JUST ONE BEAM)
	local beam = Instance.new("Part", markerContainer)
	beam.Name = "Beam"
	beam.Size = Vector3.new(0.5, 500, 0.5)
	beam.Position = groundPos + Vector3.new(0, 250, 0)
	beam.Anchored = true
	beam.CanCollide = false
	beam.Material = Enum.Material.Neon
	beam.Color = COLORS.PRIMARY_GLOW
	beam.Transparency = 0.5
	
	-- Point light at base
	local light = Instance.new("PointLight", base)
	light.Color = COLORS.ACCENT
	light.Brightness = 3
	light.Range = 20
	
	-- Simple particle emitter
	local particles = Instance.new("ParticleEmitter", base)
	particles.Texture = "rbxasset://textures/particles/sparkles_main.dds"
	particles.Color = ColorSequence.new(COLORS.ACCENT)
	particles.Size = NumberSequence.new({
		NumberSequenceKeypoint.new(0, 0.3),
		NumberSequenceKeypoint.new(1, 0)
	})
	particles.Transparency = NumberSequence.new({
		NumberSequenceKeypoint.new(0, 0.5),
		NumberSequenceKeypoint.new(1, 1)
	})
	particles.Lifetime = NumberRange.new(1, 2)
	particles.Rate = 8
	particles.Speed = NumberRange.new(2, 4)
	particles.SpreadAngle = Vector2.new(20, 20)
	particles.EmissionDirection = Enum.NormalId.Top
	
	-- Premium billboard
	local billboard = Instance.new("BillboardGui", beam)
	billboard.Size = UDim2.fromOffset(160, 60)
	billboard.StudsOffset = Vector3.new(0, 3, 0)
	billboard.AlwaysOnTop = true
	billboard.MaxDistance = 500
	
	local billboardFrame = Instance.new("Frame", billboard)
	billboardFrame.Size = UDim2.fromScale(1, 1)
	billboardFrame.BackgroundColor3 = COLORS.BG_GLASS
	billboardFrame.BackgroundTransparency = 0.1
	billboardFrame.BorderSizePixel = 0
	
	local billCorner = Instance.new("UICorner", billboardFrame)
	billCorner.CornerRadius = UDim.new(0, 10)
	
	local billStroke = Instance.new("UIStroke", billboardFrame)
	billStroke.Color = COLORS.ACCENT
	billStroke.Thickness = 2
	billStroke.Transparency = 0.2
	
	local markerIcon = Instance.new("TextLabel", billboardFrame)
	markerIcon.Size = UDim2.fromOffset(28, 28)
	markerIcon.Position = UDim2.fromOffset(6, 4)
	markerIcon.BackgroundTransparency = 1
	markerIcon.Text = "üìç"
	markerIcon.Font = Enum.Font.GothamBold
	markerIcon.TextSize = 20
	markerIcon.ZIndex = 2
	
	local markerNameLabel = Instance.new("TextLabel", billboardFrame)
	markerNameLabel.Size = UDim2.fromOffset(120, 24)
	markerNameLabel.Position = UDim2.fromOffset(36, 4)
	markerNameLabel.BackgroundTransparency = 1
	markerNameLabel.Text = name
	markerNameLabel.Font = Enum.Font.GothamBold
	markerNameLabel.TextSize = 14
	markerNameLabel.TextColor3 = COLORS.TEXT
	markerNameLabel.TextXAlignment = Enum.TextXAlignment.Left
	markerNameLabel.TextTruncate = Enum.TextTruncate.AtEnd
	markerNameLabel.ZIndex = 2
	
	local distanceLabel = Instance.new("TextLabel", billboardFrame)
	distanceLabel.Size = UDim2.fromOffset(150, 20)
	distanceLabel.Position = UDim2.fromOffset(6, 34)
	distanceLabel.BackgroundTransparency = 1
	distanceLabel.Text = "0m away"
	distanceLabel.Font = Enum.Font.Gotham
	distanceLabel.TextSize = 11
	distanceLabel.TextColor3 = COLORS.SUCCESS_GLOW
	distanceLabel.TextXAlignment = Enum.TextXAlignment.Left
	distanceLabel.ZIndex = 2
	
	-- Update distance
	spawn(function()
		while beam and beam.Parent and player.Character do
			local hrp = player.Character:FindFirstChild("HumanoidRootPart")
			if hrp then
				local distance = (hrp.Position - groundPos).Magnitude
				distanceLabel.Text = string.format("%.0fm away", distance)
			end
			task.wait(0.5)
		end
	end)
	
	-- Simple pulsing animation
	spawn(function()
		while beam and beam.Parent do
			TweenService:Create(beam, TweenInfo.new(2, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut), {
				Transparency = 0.3
			}):Play()
			TweenService:Create(light, TweenInfo.new(2, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut), {
				Brightness = 4
			}):Play()
			task.wait(2)
			if not beam or not beam.Parent then break end
			TweenService:Create(beam, TweenInfo.new(2, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut), {
				Transparency = 0.5
			}):Play()
			TweenService:Create(light, TweenInfo.new(2, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut), {
				Brightness = 3
			}):Play()
			task.wait(2)
		end
	end)
	
	-- Add to markers list
	table.insert(markers, {
		name = name,
		position = groundPos,
		container = markerContainer,
		timestamp = os.time()
	})
	
	print(string.format("‚úÖ Marker placed: %s", name))
	return true
end

-- Instant teleport with clean effects and Flying Carpet auto-equip
local function teleportToPosition(position)
	if not player.Character then return false end
	local humanoid = player.Character:FindFirstChildOfClass("Humanoid")
	local hrp = player.Character:FindFirstChild("HumanoidRootPart")
	
	if not humanoid or not hrp then return false end
	
	-- Auto-equip Flying Carpet
	equipFlyingCarpet()
	
	local startPos = hrp.Position
	
	-- INSTANT teleport
	hrp.CFrame = CFrame.new(position + Vector3.new(0, 3, 0))
	
	-- Departure ring
	spawn(function()
		local departRing = Instance.new("Part", workspace)
		departRing.Size = Vector3.new(4, 0.2, 4)
		departRing.Position = startPos
		departRing.Anchored = true
		departRing.CanCollide = false
		departRing.Material = Enum.Material.Neon
		departRing.Color = COLORS.PRIMARY
		departRing.Transparency = 0.2
		
		local departMesh = Instance.new("CylinderMesh", departRing)
		
		TweenService:Create(departRing, TweenInfo.new(0.4), {
			Size = Vector3.new(10, 0.2, 10),
			Transparency = 1
		}):Play()
		
		game:GetService("Debris"):AddItem(departRing, 0.4)
	end)
	
	-- Arrival ring
	spawn(function()
		local arrivalRing = Instance.new("Part", workspace)
		arrivalRing.Size = Vector3.new(1, 0.2, 1)
		arrivalRing.Position = position
		arrivalRing.Anchored = true
		arrivalRing.CanCollide = false
		arrivalRing.Material = Enum.Material.Neon
		arrivalRing.Color = COLORS.ACCENT
		arrivalRing.Transparency = 0
		
		local arrivalMesh = Instance.new("CylinderMesh", arrivalRing)
		
		TweenService:Create(arrivalRing, TweenInfo.new(0.5), {
			Size = Vector3.new(12, 0.2, 12),
			Transparency = 1
		}):Play()
		
		game:GetService("Debris"):AddItem(arrivalRing, 0.5)
	end)
	
	return true
end

-- Cycle to next marker (ALWAYS FORWARD, RESETS TO 1 AFTER END)
local function cycleToNextMarker()
	if #markers == 0 then
		warn("‚ö†Ô∏è No markers to cycle to!")
		return false
	end
	
	-- Increment to next marker
	currentMarkerIndex = currentMarkerIndex + 1
	
	-- If we've gone past the end, reset to 1
	if currentMarkerIndex > #markers then
		currentMarkerIndex = 1
		print("üîÑ Reached end, resetting to marker 1")
	end
	
	local marker = markers[currentMarkerIndex]
	if marker then
		local success = teleportToPosition(marker.position)
		if success then
			print(string.format("üîÑ Cycled to marker %d: %s", currentMarkerIndex, marker.name))
		end
		return success
	end
	
	return false
end

-- Auto cycle through all markers when holding (goes 1 to end, then stops)
local function startAutoCycle()
	if isHoldingCycle then return end
	if #markers == 0 then return end
	
	isHoldingCycle = true
	
	spawn(function()
		while isHoldingCycle do
			-- Check if we've reached the last marker
			if currentMarkerIndex >= #markers then
				isHoldingCycle = false
				print("üèÅ Reached last marker, stopping cycle")
				break
			end
			
			cycleToNextMarker()
			task.wait(0.2) -- 0.2 second delay between teleports
		end
	end)
end

local function stopAutoCycle()
	isHoldingCycle = false
end

-- Save cycle hotkey
local function saveCycleHotkey(keyCode)
	pcall(function()
		if writefile then
			writefile("DuckyHub_CycleHotkey.txt", keyCode.Name)
			print("üíæ Cycle hotkey saved: " .. keyCode.Name)
		end
	end)
end

-- Load cycle hotkey
local function loadCycleHotkey()
	pcall(function()
		if readfile and isfile and isfile("DuckyHub_CycleHotkey.txt") then
			local savedKey = readfile("DuckyHub_CycleHotkey.txt")
			local keyCode = Enum.KeyCode[savedKey]
			if keyCode then
				cycleHotkey = keyCode
				print("üîë Loaded cycle hotkey: " .. savedKey)
			end
		end
	end)
end

-- Hotkey listener for cycling
UserInputService.InputBegan:Connect(function(input, gameProcessed)
	if gameProcessed or configuringCycleHotkey then return end
	
	if input.UserInputType == Enum.UserInputType.Keyboard then
		if input.KeyCode == cycleHotkey then
			cycleToNextMarker()
		end
	end
end)

-- Hold detection
UserInputService.InputBegan:Connect(function(input, gameProcessed)
	if gameProcessed or configuringCycleHotkey then return end
	
	if input.UserInputType == Enum.UserInputType.Keyboard then
		if input.KeyCode == cycleHotkey then
			task.wait(0.3) -- Hold threshold
			if UserInputService:IsKeyDown(cycleHotkey) then
				startAutoCycle()
			end
		end
	end
end)

UserInputService.InputEnded:Connect(function(input, gameProcessed)
	if input.UserInputType == Enum.UserInputType.Keyboard then
		if input.KeyCode == cycleHotkey then
			stopAutoCycle()
		end
	end
end)

-- Delete a marker with effect
local function deleteMarker(index)
	if markers[index] then
		local marker = markers[index]
		
		-- Death animation
		if marker.container and marker.container.Parent then
			local beam = marker.container:FindFirstChild("Beam")
			
			-- Explosion effect
			if beam then
				local explosion = Instance.new("Part", workspace)
				explosion.Size = Vector3.new(1, 1, 1)
				explosion.Position = beam.Position
				explosion.Anchored = true
				explosion.CanCollide = false
				explosion.Material = Enum.Material.Neon
				explosion.Color = COLORS.DANGER
				explosion.Transparency = 0.3
				explosion.Shape = Enum.PartType.Ball
				
				TweenService:Create(explosion, TweenInfo.new(0.5), {
					Size = Vector3.new(10, 10, 10),
					Transparency = 1
				}):Play()
				
				game:GetService("Debris"):AddItem(explosion, 0.5)
			end
			
			-- Fade out parts
			for _, part in pairs(marker.container:GetDescendants()) do
				if part:IsA("BasePart") then
					TweenService:Create(part, TweenInfo.new(0.3), {Transparency = 1}):Play()
				elseif part:IsA("PointLight") then
					TweenService:Create(part, TweenInfo.new(0.3), {Brightness = 0}):Play()
				end
			end
			
			task.wait(0.3)
			marker.container:Destroy()
		end
		
		table.remove(markers, index)
		
		-- Reset cycle index if needed
		if currentMarkerIndex > #markers then
			currentMarkerIndex = 0
		end
		
		print(string.format("üóëÔ∏è Marker deleted: %s", marker.name))
		
		-- Update counter without recreating menu
		if counterText then
			counterText.Text = string.format("%d/10", #markers)
		end
		
		return true
	end
	return false
end

-- Refresh marker list without recreating entire menu
local function refreshMarkerList()
	if not markerListFrame then return end
	
	-- Clear existing entries
	for _, child in pairs(markerListFrame:GetChildren()) do
		if child:IsA("Frame") or child:IsA("TextLabel") then
			child:Destroy()
		end
	end
	
	-- Create marker entries
	for i, marker in ipairs(markers) do
		local entry = Instance.new("Frame", markerListFrame)
		entry.Size = UDim2.fromOffset(306, 86)
		entry.BackgroundColor3 = COLORS.BG_CARD
		entry.BackgroundTransparency = 0.2
		entry.BorderSizePixel = 0
		entry.ZIndex = 103
		
		local entryCorner = Instance.new("UICorner", entry)
		entryCorner.CornerRadius = UDim.new(0, 16)
		
		local entryStroke = Instance.new("UIStroke", entry)
		entryStroke.Color = COLORS.ACCENT
		entryStroke.Thickness = 2
		entryStroke.Transparency = 0.4
		
		-- Top gradient bar
		local topBar = Instance.new("Frame", entry)
		topBar.Size = UDim2.fromOffset(306, 4)
		topBar.BackgroundColor3 = COLORS.ACCENT
		topBar.BackgroundTransparency = 0.3
		topBar.BorderSizePixel = 0
		topBar.ZIndex = 104
		
		local topBarCorner = Instance.new("UICorner", topBar)
		topBarCorner.CornerRadius = UDim.new(0, 16)
		
		-- Left section with number
		local leftSection = Instance.new("Frame", entry)
		leftSection.Size = UDim2.fromOffset(70, 86)
		leftSection.BackgroundColor3 = COLORS.ACCENT
		leftSection.BackgroundTransparency = 0.88
		leftSection.BorderSizePixel = 0
		leftSection.ZIndex = 103
		
		local leftCorner = Instance.new("UICorner", leftSection)
		leftCorner.CornerRadius = UDim.new(0, 16)
		
		-- Number badge
		local numberCircle = Instance.new("Frame", leftSection)
		numberCircle.Size = UDim2.fromOffset(50, 50)
		numberCircle.Position = UDim2.fromOffset(10, 18)
		numberCircle.BackgroundColor3 = COLORS.ACCENT
		numberCircle.BackgroundTransparency = 0.1
		numberCircle.BorderSizePixel = 0
		numberCircle.ZIndex = 104
		
		local numberCorner = Instance.new("UICorner", numberCircle)
		numberCorner.CornerRadius = UDim.new(1, 0)
		
		local numberStroke = Instance.new("UIStroke", numberCircle)
		numberStroke.Color = COLORS.ACCENT_LIGHT
		numberStroke.Thickness = 2.5
		numberStroke.Transparency = 0.2
		
		local numberText = Instance.new("TextLabel", numberCircle)
		numberText.Size = UDim2.fromScale(1, 1)
		numberText.BackgroundTransparency = 1
		numberText.Text = tostring(i)
		numberText.Font = Enum.Font.GothamBold
		numberText.TextSize = 26
		numberText.TextColor3 = COLORS.TEXT
		numberText.ZIndex = 105
		
		-- Info section
		local infoSection = Instance.new("Frame", entry)
		infoSection.Size = UDim2.fromOffset(120, 70)
		infoSection.Position = UDim2.fromOffset(75, 8)
		infoSection.BackgroundTransparency = 1
		infoSection.ZIndex = 104
		
		local markerName = Instance.new("TextLabel", infoSection)
		markerName.Size = UDim2.fromOffset(120, 26)
		markerName.BackgroundTransparency = 1
		markerName.Text = marker.name
		markerName.Font = Enum.Font.GothamBold
		markerName.TextSize = 16
		markerName.TextColor3 = COLORS.TEXT
		markerName.TextXAlignment = Enum.TextXAlignment.Left
		markerName.TextTruncate = Enum.TextTruncate.AtEnd
		markerName.ZIndex = 104
		
		local markerPos = Instance.new("TextLabel", infoSection)
		markerPos.Size = UDim2.fromOffset(120, 20)
		markerPos.Position = UDim2.fromOffset(0, 30)
		markerPos.BackgroundTransparency = 1
		markerPos.Text = string.format("üìç %.0f, %.0f, %.0f", marker.position.X, marker.position.Y, marker.position.Z)
		markerPos.Font = Enum.Font.Gotham
		markerPos.TextSize = 10
		markerPos.TextColor3 = COLORS.TEXT_MUTED
		markerPos.TextXAlignment = Enum.TextXAlignment.Left
		markerPos.ZIndex = 104
		
		local distanceText = Instance.new("TextLabel", infoSection)
		distanceText.Size = UDim2.fromOffset(120, 18)
		distanceText.Position = UDim2.fromOffset(0, 52)
		distanceText.BackgroundTransparency = 1
		distanceText.Text = "0m"
		distanceText.Font = Enum.Font.GothamBold
		distanceText.TextSize = 11
		distanceText.TextColor3 = COLORS.SUCCESS_GLOW
		distanceText.TextXAlignment = Enum.TextXAlignment.Left
		distanceText.ZIndex = 104
		
		-- Update distance
		spawn(function()
			while entry and entry.Parent and player.Character do
				local hrp = player.Character:FindFirstChild("HumanoidRootPart")
				if hrp then
					local distance = (hrp.Position - marker.position).Magnitude
					distanceText.Text = string.format("%.0fm", distance)
				end
				task.wait(0.5)
			end
		end)
		
		-- Buttons section
		local buttonsSection = Instance.new("Frame", entry)
		buttonsSection.Size = UDim2.fromOffset(100, 70)
		buttonsSection.Position = UDim2.fromOffset(200, 8)
		buttonsSection.BackgroundTransparency = 1
		buttonsSection.ZIndex = 104
		
		-- TP button
		local tpBtn = Instance.new("TextButton", buttonsSection)
		tpBtn.Size = UDim2.fromOffset(96, 38)
		tpBtn.BackgroundColor3 = COLORS.SUCCESS
		tpBtn.BackgroundTransparency = 0.05
		tpBtn.Text = "‚ö° TP"
		tpBtn.Font = Enum.Font.GothamBold
		tpBtn.TextSize = 15
		tpBtn.TextColor3 = COLORS.TEXT
		tpBtn.BorderSizePixel = 0
		tpBtn.AutoButtonColor = false
		tpBtn.ZIndex = 104
		
		local tpCorner = Instance.new("UICorner", tpBtn)
		tpCorner.CornerRadius = UDim.new(0, 10)
		
		local tpStroke = Instance.new("UIStroke", tpBtn)
		tpStroke.Color = COLORS.SUCCESS_GLOW
		tpStroke.Thickness = 2
		tpStroke.Transparency = 0.25
		
		tpBtn.MouseEnter:Connect(function()
			TweenService:Create(tpBtn, ANIM.SMOOTH, {BackgroundTransparency = 0, Size = UDim2.fromOffset(100, 42)}):Play()
			TweenService:Create(tpStroke, ANIM.SMOOTH, {Transparency = 0.05}):Play()
			TweenService:Create(entry, ANIM.SMOOTH, {BackgroundTransparency = 0.1}):Play()
			TweenService:Create(entryStroke, ANIM.SMOOTH, {Transparency = 0.2, Color = COLORS.SUCCESS}):Play()
		end)
		
		tpBtn.MouseLeave:Connect(function()
			TweenService:Create(tpBtn, ANIM.SMOOTH, {BackgroundTransparency = 0.05, Size = UDim2.fromOffset(96, 38)}):Play()
			TweenService:Create(tpStroke, ANIM.SMOOTH, {Transparency = 0.25}):Play()
			TweenService:Create(entry, ANIM.SMOOTH, {BackgroundTransparency = 0.2}):Play()
			TweenService:Create(entryStroke, ANIM.SMOOTH, {Transparency = 0.4, Color = COLORS.ACCENT}):Play()
		end)
		
		tpBtn.MouseButton1Click:Connect(function()
			local success = teleportToPosition(marker.position)
			if success then
				-- Set current index to the marker we clicked (minus 1, so next cycle goes to the next one)
				currentMarkerIndex = i - 1
				
				tpBtn.Text = "‚úì DONE"
				TweenService:Create(tpBtn, ANIM.BOUNCE, {BackgroundColor3 = Color3.fromRGB(120, 255, 120)}):Play()
				task.wait(1.2)
				if tpBtn and tpBtn.Parent then
					tpBtn.Text = "‚ö° TP"
					TweenService:Create(tpBtn, ANIM.SMOOTH, {BackgroundColor3 = COLORS.SUCCESS}):Play()
				end
			end
		end)
		
		-- Delete button
		local delBtn = Instance.new("TextButton", buttonsSection)
		delBtn.Size = UDim2.fromOffset(96, 28)
		delBtn.Position = UDim2.fromOffset(0, 42)
		delBtn.BackgroundColor3 = COLORS.DANGER
		delBtn.BackgroundTransparency = 0.1
		delBtn.Text = "üóëÔ∏è Delete"
		delBtn.Font = Enum.Font.Gotham
		delBtn.TextSize = 12
		delBtn.TextColor3 = COLORS.TEXT
		delBtn.BorderSizePixel = 0
		delBtn.AutoButtonColor = false
		delBtn.ZIndex = 104
		
		local delCorner = Instance.new("UICorner", delBtn)
		delCorner.CornerRadius = UDim.new(0, 8)
		
		local delStroke = Instance.new("UIStroke", delBtn)
		delStroke.Color = COLORS.DANGER
		delStroke.Thickness = 1.5
		delStroke.Transparency = 0.4
		
		delBtn.MouseEnter:Connect(function()
			TweenService:Create(delBtn, ANIM.SMOOTH, {BackgroundTransparency = 0}):Play()
			TweenService:Create(delStroke, ANIM.SMOOTH, {Transparency = 0.2}):Play()
		end)
		
		delBtn.MouseLeave:Connect(function()
			TweenService:Create(delBtn, ANIM.SMOOTH, {BackgroundTransparency = 0.1}):Play()
			TweenService:Create(delStroke, ANIM.SMOOTH, {Transparency = 0.4}):Play()
		end)
		
		delBtn.MouseButton1Click:Connect(function()
			deleteMarker(i)
			refreshMarkerList()
		end)
	end
	
	-- Empty state
	if #markers == 0 then
		local emptyCard = Instance.new("Frame", markerListFrame)
		emptyCard.Size = UDim2.fromOffset(306, 140)
		emptyCard.BackgroundColor3 = COLORS.BG_CARD
		emptyCard.BackgroundTransparency = 0.25
		emptyCard.BorderSizePixel = 0
		emptyCard.ZIndex = 103
		
		local emptyCorner = Instance.new("UICorner", emptyCard)
		emptyCorner.CornerRadius = UDim.new(0, 16)
		
		local emptyStroke = Instance.new("UIStroke", emptyCard)
		emptyStroke.Color = COLORS.PRIMARY
		emptyStroke.Thickness = 2
		emptyStroke.Transparency = 0.5
		
		local emptyIcon = Instance.new("TextLabel", emptyCard)
		emptyIcon.Size = UDim2.fromOffset(60, 60)
		emptyIcon.Position = UDim2.fromOffset(123, 20)
		emptyIcon.BackgroundTransparency = 1
		emptyIcon.Text = "üìç"
		emptyIcon.Font = Enum.Font.GothamBold
		emptyIcon.TextSize = 48
		emptyIcon.ZIndex = 104
		
		local emptyTitle = Instance.new("TextLabel", emptyCard)
		emptyTitle.Size = UDim2.fromOffset(280, 24)
		emptyTitle.Position = UDim2.fromOffset(13, 85)
		emptyTitle.BackgroundTransparency = 1
		emptyTitle.Text = "NO MARKERS YET"
		emptyTitle.Font = Enum.Font.GothamBold
		emptyTitle.TextSize = 16
		emptyTitle.TextColor3 = COLORS.TEXT
		emptyTitle.ZIndex = 104
		
		local emptyDesc = Instance.new("TextLabel", emptyCard)
		emptyDesc.Size = UDim2.fromOffset(280, 18)
		emptyDesc.Position = UDim2.fromOffset(13, 112)
		emptyDesc.BackgroundTransparency = 1
		emptyDesc.Text = "Click the button above to place your first marker"
		emptyDesc.Font = Enum.Font.Gotham
		emptyDesc.TextSize = 11
		emptyDesc.TextColor3 = COLORS.TEXT_MUTED
		emptyDesc.ZIndex = 104
	end
end

-- Create marker management menu
local function createMarkerMenu()
	if markerMenu then markerMenu:Destroy() end
	
	markerMenu = Instance.new("Frame", gui)
	markerMenu.Size = UDim2.fromOffset(0, 650)
	markerMenu.Position = UDim2.new(1, 50, 0.5, -325)
	markerMenu.BackgroundColor3 = COLORS.BG_GLASS
	markerMenu.BackgroundTransparency = 0.12
	markerMenu.BorderSizePixel = 0
	markerMenu.ClipsDescendants = true
	markerMenu.Active = true
	markerMenu.ZIndex = 100
	
	local menuCorner = Instance.new("UICorner", markerMenu)
	menuCorner.CornerRadius = UDim.new(0, 24)
	
	local menuStroke = Instance.new("UIStroke", markerMenu)
	menuStroke.Color = COLORS.ACCENT
	menuStroke.Thickness = 2.5
	menuStroke.Transparency = 0.2
	
	-- Menu glow
	local menuGlow = Instance.new("ImageLabel", markerMenu)
	menuGlow.Size = UDim2.fromScale(1.04, 1.04)
	menuGlow.Position = UDim2.fromScale(0.5, 0.5)
	menuGlow.AnchorPoint = Vector2.new(0.5, 0.5)
	menuGlow.BackgroundTransparency = 1
	menuGlow.Image = "rbxassetid://5028857084"
	menuGlow.ImageColor3 = COLORS.ACCENT
	menuGlow.ImageTransparency = 0.4
	menuGlow.ScaleType = Enum.ScaleType.Slice
	menuGlow.SliceCenter = Rect.new(24, 24, 276, 276)
	menuGlow.ZIndex = 99
	
	-- Pulsing menu glow
	spawn(function()
		while markerMenu and markerMenu.Parent do
			TweenService:Create(menuGlow, TweenInfo.new(2, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut), {
				ImageTransparency = 0.6,
				ImageColor3 = COLORS.PRIMARY_GLOW
			}):Play()
			task.wait(2)
			if not markerMenu or not markerMenu.Parent then break end
			TweenService:Create(menuGlow, TweenInfo.new(2, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut), {
				ImageTransparency = 0.4,
				ImageColor3 = COLORS.ACCENT
			}):Play()
			task.wait(2)
		end
	end)
	
	-- Draggable
	local dragging, dragStart, startPos
	
	markerMenu.InputBegan:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseButton1 then
			dragging = true
			dragStart = input.Position
			startPos = markerMenu.Position
			
			input.Changed:Connect(function()
				if input.UserInputState == Enum.UserInputState.End then
					dragging = false
				end
			end)
		end
	end)
	
	UserInputService.InputChanged:Connect(function(input)
		if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
			local delta = input.Position - dragStart
			markerMenu.Position = UDim2.new(
				startPos.X.Scale, startPos.X.Offset + delta.X,
				startPos.Y.Scale, startPos.Y.Offset + delta.Y
			)
		end
	end)
	
	-- Header
	local header = Instance.new("Frame", markerMenu)
	header.Size = UDim2.fromOffset(360, 100)
	header.BackgroundColor3 = COLORS.BG_CARD
	header.BackgroundTransparency = 0.25
	header.BorderSizePixel = 0
	header.ZIndex = 102
	
	local headerCorner = Instance.new("UICorner", header)
	headerCorner.CornerRadius = UDim.new(0, 24)
	
	-- Header gradient
	local headerGrad = Instance.new("Frame", header)
	headerGrad.Size = UDim2.fromScale(1, 0.6)
	headerGrad.BackgroundColor3 = COLORS.ACCENT
	headerGrad.BackgroundTransparency = 0.88
	headerGrad.BorderSizePixel = 0
	
	local headerGradCorner = Instance.new("UICorner", headerGrad)
	headerGradCorner.CornerRadius = UDim.new(0, 24)
	
	local headerGradGrad = Instance.new("UIGradient", headerGrad)
	headerGradGrad.Transparency = NumberSequence.new({
		NumberSequenceKeypoint.new(0, 0),
		NumberSequenceKeypoint.new(1, 1)
	})
	headerGradGrad.Rotation = 90
	
	local headerIcon = Instance.new("TextLabel", header)
	headerIcon.Size = UDim2.fromOffset(60, 60)
	headerIcon.Position = UDim2.fromOffset(150, 10)
	headerIcon.BackgroundTransparency = 1
	headerIcon.Text = "üìç"
	headerIcon.Font = Enum.Font.GothamBold
	headerIcon.TextSize = 48
	headerIcon.ZIndex = 103
	
	-- Pulsing icon
	spawn(function()
		while markerMenu and markerMenu.Parent and headerIcon.Parent do
			TweenService:Create(headerIcon, TweenInfo.new(1.5, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut), {
				TextSize = 52,
				Rotation = 5
			}):Play()
			task.wait(1.5)
			if not markerMenu or not markerMenu.Parent then break end
			TweenService:Create(headerIcon, TweenInfo.new(1.5, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut), {
				TextSize = 48,
				Rotation = -5
			}):Play()
			task.wait(1.5)
		end
	end)
	
	local headerTitle = Instance.new("TextLabel", header)
	headerTitle.Size = UDim2.fromOffset(340, 24)
	headerTitle.Position = UDim2.fromOffset(10, 70)
	headerTitle.BackgroundTransparency = 1
	headerTitle.Text = "TP MARKERS"
	headerTitle.Font = Enum.Font.GothamBold
	headerTitle.TextSize = 18
	headerTitle.TextColor3 = COLORS.TEXT
	headerTitle.ZIndex = 103
	
	-- Tab system
	local tabContainer = Instance.new("Frame", markerMenu)
	tabContainer.Size = UDim2.fromOffset(340, 50)
	tabContainer.Position = UDim2.fromOffset(10, 110)
	tabContainer.BackgroundTransparency = 1
	tabContainer.ZIndex = 102
	
	local currentTab = "markers"
	
	-- Markers Tab
	local markersTab = Instance.new("TextButton", tabContainer)
	markersTab.Size = UDim2.fromOffset(165, 50)
	markersTab.Position = UDim2.fromOffset(0, 0)
	markersTab.BackgroundColor3 = COLORS.PRIMARY
	markersTab.BackgroundTransparency = 0.1
	markersTab.Text = "üìç MARKERS"
	markersTab.Font = Enum.Font.GothamBold
	markersTab.TextSize = 15
	markersTab.TextColor3 = COLORS.TEXT
	markersTab.BorderSizePixel = 0
	markersTab.AutoButtonColor = false
	markersTab.ZIndex = 103
	
	local markersTabCorner = Instance.new("UICorner", markersTab)
	markersTabCorner.CornerRadius = UDim.new(0, 12)
	
	local markersTabStroke = Instance.new("UIStroke", markersTab)
	markersTabStroke.Color = COLORS.ACCENT
	markersTabStroke.Thickness = 2.5
	markersTabStroke.Transparency = 0.2
	
	-- Hotkey Tab
	local hotkeyTab = Instance.new("TextButton", tabContainer)
	hotkeyTab.Size = UDim2.fromOffset(165, 50)
	hotkeyTab.Position = UDim2.fromOffset(175, 0)
	hotkeyTab.BackgroundColor3 = COLORS.BG_CARD
	hotkeyTab.BackgroundTransparency = 0.4
	hotkeyTab.Text = "üîÑ HOTKEY"
	hotkeyTab.Font = Enum.Font.GothamBold
	hotkeyTab.TextSize = 15
	hotkeyTab.TextColor3 = COLORS.TEXT_MUTED
	hotkeyTab.BorderSizePixel = 0
	hotkeyTab.AutoButtonColor = false
	hotkeyTab.ZIndex = 103
	
	local hotkeyTabCorner = Instance.new("UICorner", hotkeyTab)
	hotkeyTabCorner.CornerRadius = UDim.new(0, 12)
	
	local hotkeyTabStroke = Instance.new("UIStroke", hotkeyTab)
	hotkeyTabStroke.Color = COLORS.PRIMARY
	hotkeyTabStroke.Thickness = 2
	hotkeyTabStroke.Transparency = 0.6
	
	-- Markers content frame
	local markersContent = Instance.new("Frame", markerMenu)
	markersContent.Size = UDim2.fromOffset(340, 470)
	markersContent.Position = UDim2.fromOffset(10, 172)
	markersContent.BackgroundTransparency = 1
	markersContent.Visible = true
	markersContent.ZIndex = 102
	
	-- Hotkey config frame
	local hotkeyContent = Instance.new("Frame", markerMenu)
	hotkeyContent.Size = UDim2.fromOffset(340, 470)
	hotkeyContent.Position = UDim2.fromOffset(10, 172)
	hotkeyContent.BackgroundTransparency = 1
	hotkeyContent.Visible = false
	hotkeyContent.ZIndex = 102
	
	-- Tab switching logic
	local function switchTab(tab)
		if tab == "markers" then
			currentTab = "markers"
			markersContent.Visible = true
			hotkeyContent.Visible = false
			
			-- Update tab appearance
			TweenService:Create(markersTab, ANIM.SMOOTH, {BackgroundTransparency = 0.1, BackgroundColor3 = COLORS.PRIMARY}):Play()
			TweenService:Create(markersTabStroke, ANIM.SMOOTH, {Transparency = 0.2, Color = COLORS.ACCENT}):Play()
			markersTab.TextColor3 = COLORS.TEXT
			
			TweenService:Create(hotkeyTab, ANIM.SMOOTH, {BackgroundTransparency = 0.4, BackgroundColor3 = COLORS.BG_CARD}):Play()
			TweenService:Create(hotkeyTabStroke, ANIM.SMOOTH, {Transparency = 0.6, Color = COLORS.PRIMARY}):Play()
			hotkeyTab.TextColor3 = COLORS.TEXT_MUTED
		else
			currentTab = "hotkey"
			markersContent.Visible = false
			hotkeyContent.Visible = true
			
			-- Update tab appearance
			TweenService:Create(hotkeyTab, ANIM.SMOOTH, {BackgroundTransparency = 0.1, BackgroundColor3 = COLORS.PRIMARY}):Play()
			TweenService:Create(hotkeyTabStroke, ANIM.SMOOTH, {Transparency = 0.2, Color = COLORS.ACCENT}):Play()
			hotkeyTab.TextColor3 = COLORS.TEXT
			
			TweenService:Create(markersTab, ANIM.SMOOTH, {BackgroundTransparency = 0.4, BackgroundColor3 = COLORS.BG_CARD}):Play()
			TweenService:Create(markersTabStroke, ANIM.SMOOTH, {Transparency = 0.6, Color = COLORS.PRIMARY}):Play()
			markersTab.TextColor3 = COLORS.TEXT_MUTED
		end
	end
	
	markersTab.MouseButton1Click:Connect(function()
		switchTab("markers")
	end)
	
	hotkeyTab.MouseButton1Click:Connect(function()
		switchTab("hotkey")
	end)
	
	-- Counter badge
	local counterBadge = Instance.new("Frame", header)
	counterBadge.Size = UDim2.fromOffset(70, 32)
	counterBadge.Position = UDim2.fromOffset(280, 12)
	counterBadge.BackgroundColor3 = COLORS.ACCENT
	counterBadge.BackgroundTransparency = 0.05
	counterBadge.BorderSizePixel = 0
	counterBadge.ZIndex = 103
	
	local counterCorner = Instance.new("UICorner", counterBadge)
	counterCorner.CornerRadius = UDim.new(0, 10)
	
	local counterStroke = Instance.new("UIStroke", counterBadge)
	counterStroke.Color = COLORS.ACCENT_LIGHT
	counterStroke.Thickness = 2
	counterStroke.Transparency = 0.3
	
	counterText = Instance.new("TextLabel", counterBadge)
	counterText.Size = UDim2.fromScale(1, 1)
	counterText.BackgroundTransparency = 1
	counterText.Text = string.format("%d/10", #markers)
	counterText.Font = Enum.Font.GothamBold
	counterText.TextSize = 15
	counterText.TextColor3 = COLORS.TEXT
	counterText.ZIndex = 104
	
	-- Quick place button (inside markers content)
	local placeBtn = Instance.new("TextButton", markersContent)
	placeBtn.Size = UDim2.fromOffset(340, 56)
	placeBtn.Position = UDim2.fromOffset(0, 0)
	placeBtn.BackgroundColor3 = COLORS.PRIMARY
	placeBtn.BackgroundTransparency = 0.1
	placeBtn.Text = "üìç PLACE MARKER HERE"
	placeBtn.Font = Enum.Font.GothamBold
	placeBtn.TextSize = 16
	placeBtn.TextColor3 = COLORS.TEXT
	placeBtn.BorderSizePixel = 0
	placeBtn.AutoButtonColor = false
	placeBtn.ZIndex = 102
	
	local placeBtnCorner = Instance.new("UICorner", placeBtn)
	placeBtnCorner.CornerRadius = UDim.new(0, 14)
	
	local placeBtnStroke = Instance.new("UIStroke", placeBtn)
	placeBtnStroke.Color = COLORS.PRIMARY_GLOW
	placeBtnStroke.Thickness = 2.5
	placeBtnStroke.Transparency = 0.3
	
	-- Button glow
	local placeBtnGlow = Instance.new("ImageLabel", placeBtn)
	placeBtnGlow.Size = UDim2.fromScale(1.05, 1.05)
	placeBtnGlow.Position = UDim2.fromScale(0.5, 0.5)
	placeBtnGlow.AnchorPoint = Vector2.new(0.5, 0.5)
	placeBtnGlow.BackgroundTransparency = 1
	placeBtnGlow.Image = "rbxassetid://5028857084"
	placeBtnGlow.ImageColor3 = COLORS.PRIMARY
	placeBtnGlow.ImageTransparency = 1
	placeBtnGlow.ScaleType = Enum.ScaleType.Slice
	placeBtnGlow.SliceCenter = Rect.new(24, 24, 276, 276)
	placeBtnGlow.ZIndex = 101
	
	placeBtn.MouseEnter:Connect(function()
		TweenService:Create(placeBtn, ANIM.SMOOTH, {BackgroundTransparency = 0, Size = UDim2.fromOffset(345, 60)}):Play()
		TweenService:Create(placeBtnStroke, ANIM.SMOOTH, {Transparency = 0.1, Color = COLORS.ACCENT}):Play()
		TweenService:Create(placeBtnGlow, ANIM.SMOOTH, {ImageTransparency = 0.4}):Play()
	end)
	
	placeBtn.MouseLeave:Connect(function()
		TweenService:Create(placeBtn, ANIM.SMOOTH, {BackgroundTransparency = 0.1, Size = UDim2.fromOffset(340, 56)}):Play()
		TweenService:Create(placeBtnStroke, ANIM.SMOOTH, {Transparency = 0.3, Color = COLORS.PRIMARY_GLOW}):Play()
		TweenService:Create(placeBtnGlow, ANIM.SMOOTH, {ImageTransparency = 1}):Play()
	end)
	
	placeBtn.MouseButton1Click:Connect(function()
		if #markers >= maxMarkers then
			placeBtn.Text = "‚ùå MAX MARKERS (10)"
			placeBtn.BackgroundColor3 = COLORS.DANGER
			TweenService:Create(placeBtnStroke, ANIM.SMOOTH, {Color = COLORS.DANGER}):Play()
			task.wait(2)
			placeBtn.Text = "üìç PLACE MARKER HERE"
			placeBtn.BackgroundColor3 = COLORS.PRIMARY
			TweenService:Create(placeBtnStroke, ANIM.SMOOTH, {Color = COLORS.PRIMARY_GLOW}):Play()
			return
		end
		
		if player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
			local hrp = player.Character.HumanoidRootPart
			local markerName = "Marker " .. (#markers + 1)
			local success = createMarker(markerName, hrp.Position)
			
			if success then
				placeBtn.Text = "‚úÖ MARKER PLACED!"
				placeBtn.BackgroundColor3 = COLORS.SUCCESS
				TweenService:Create(placeBtnStroke, ANIM.SMOOTH, {Color = COLORS.SUCCESS_GLOW}):Play()
				
				counterText.Text = string.format("%d/10", #markers)
				refreshMarkerList()
				
				task.wait(1.5)
				placeBtn.Text = "üìç PLACE MARKER HERE"
				placeBtn.BackgroundColor3 = COLORS.PRIMARY
				TweenService:Create(placeBtnStroke, ANIM.SMOOTH, {Color = COLORS.PRIMARY_GLOW}):Play()
			end
		end
	end)
	
	-- Marker list
	markerListFrame = Instance.new("ScrollingFrame", markersContent)
	markerListFrame.Size = UDim2.fromOffset(340, 400)
	markerListFrame.Position = UDim2.fromOffset(0, 66)
	markerListFrame.BackgroundColor3 = COLORS.BG_CARD
	markerListFrame.BackgroundTransparency = 0.3
	markerListFrame.BorderSizePixel = 0
	markerListFrame.ScrollBarThickness = 7
	markerListFrame.ScrollBarImageColor3 = COLORS.PRIMARY
	markerListFrame.ScrollBarImageTransparency = 0.25
	markerListFrame.CanvasSize = UDim2.fromOffset(340, 0)
	markerListFrame.AutomaticCanvasSize = Enum.AutomaticSize.Y
	markerListFrame.ZIndex = 102
	
	local listCorner = Instance.new("UICorner", markerListFrame)
	listCorner.CornerRadius = UDim.new(0, 18)
	
	local listStroke = Instance.new("UIStroke", markerListFrame)
	listStroke.Color = COLORS.PRIMARY
	listStroke.Thickness = 2
	listStroke.Transparency = 0.6
	
	local listLayout = Instance.new("UIListLayout", markerListFrame)
	listLayout.SortOrder = Enum.SortOrder.LayoutOrder
	listLayout.Padding = UDim.new(0, 12)
	
	local listPadding = Instance.new("UIPadding", markerListFrame)
	listPadding.PaddingTop = UDim.new(0, 14)
	listPadding.PaddingBottom = UDim.new(0, 14)
	listPadding.PaddingLeft = UDim.new(0, 14)
	listPadding.PaddingRight = UDim.new(0, 14)
	
	-- Initial list population
	refreshMarkerList()
	
	-- HOTKEY CONFIG CONTENT (inside hotkeyContent frame)
	-- Current hotkey display
	local currentContainer = Instance.new("Frame", hotkeyContent)
	currentContainer.Size = UDim2.fromOffset(340, 100)
	currentContainer.Position = UDim2.fromOffset(0, 0)
	currentContainer.BackgroundColor3 = COLORS.BG_CARD
	currentContainer.BackgroundTransparency = 0.3
	currentContainer.BorderSizePixel = 0
	currentContainer.ZIndex = 103
	
	local currentCorner = Instance.new("UICorner", currentContainer)
	currentCorner.CornerRadius = UDim.new(0, 16)
	
	local currentStroke = Instance.new("UIStroke", currentContainer)
	currentStroke.Color = COLORS.PRIMARY
	currentStroke.Thickness = 2
	currentStroke.Transparency = 0.6
	
	local currentLabel = Instance.new("TextLabel", currentContainer)
	currentLabel.Size = UDim2.fromOffset(320, 24)
	currentLabel.Position = UDim2.fromOffset(10, 12)
	currentLabel.BackgroundTransparency = 1
	currentLabel.Text = "üîë CURRENT CYCLE HOTKEY"
	currentLabel.Font = Enum.Font.GothamBold
	currentLabel.TextSize = 14
	currentLabel.TextColor3 = COLORS.TEXT_MUTED
	currentLabel.ZIndex = 104
	
	local hotkeyDisplay = Instance.new("Frame", currentContainer)
	hotkeyDisplay.Size = UDim2.fromOffset(320, 50)
	hotkeyDisplay.Position = UDim2.fromOffset(10, 42)
	hotkeyDisplay.BackgroundColor3 = COLORS.BG_GLASS
	hotkeyDisplay.BackgroundTransparency = 0.2
	hotkeyDisplay.BorderSizePixel = 0
	hotkeyDisplay.ZIndex = 104
	
	local displayCorner = Instance.new("UICorner", hotkeyDisplay)
	displayCorner.CornerRadius = UDim.new(0, 12)
	
	local displayStroke = Instance.new("UIStroke", hotkeyDisplay)
	displayStroke.Color = COLORS.ACCENT
	displayStroke.Thickness = 2.5
	displayStroke.Transparency = 0.3
	
	local hotkeyText = Instance.new("TextLabel", hotkeyDisplay)
	hotkeyText.Size = UDim2.fromScale(1, 1)
	hotkeyText.BackgroundTransparency = 1
	hotkeyText.Text = cycleHotkey.Name
	hotkeyText.Font = Enum.Font.GothamBold
	hotkeyText.TextSize = 22
	hotkeyText.TextColor3 = COLORS.ACCENT
	hotkeyText.ZIndex = 105
	
	-- Pulsing text
	spawn(function()
		while markerMenu and markerMenu.Parent and hotkeyText.Parent do
			TweenService:Create(hotkeyText, TweenInfo.new(1.5, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut), {
				TextSize = 24,
				TextColor3 = COLORS.ACCENT_LIGHT
			}):Play()
			task.wait(1.5)
			if not markerMenu or not markerMenu.Parent then break end
			TweenService:Create(hotkeyText, TweenInfo.new(1.5, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut), {
				TextSize = 22,
				TextColor3 = COLORS.ACCENT
			}):Play()
			task.wait(1.5)
		end
	end)
	
	-- Change hotkey button
	local changeBtn = Instance.new("TextButton", hotkeyContent)
	changeBtn.Size = UDim2.fromOffset(340, 60)
	changeBtn.Position = UDim2.fromOffset(0, 120)
	changeBtn.BackgroundColor3 = COLORS.PRIMARY
	changeBtn.BackgroundTransparency = 0.1
	changeBtn.Text = "üîÑ CHANGE HOTKEY"
	changeBtn.Font = Enum.Font.GothamBold
	changeBtn.TextSize = 16
	changeBtn.TextColor3 = COLORS.TEXT
	changeBtn.BorderSizePixel = 0
	changeBtn.AutoButtonColor = false
	changeBtn.ZIndex = 103
	
	local changeBtnCorner = Instance.new("UICorner", changeBtn)
	changeBtnCorner.CornerRadius = UDim.new(0, 14)
	
	local changeBtnStroke = Instance.new("UIStroke", changeBtn)
	changeBtnStroke.Color = COLORS.PRIMARY
	changeBtnStroke.Thickness = 2.5
	changeBtnStroke.Transparency = 0.3
	
	-- Button glow
	local btnGlow = Instance.new("ImageLabel", changeBtn)
	btnGlow.Size = UDim2.fromScale(1.05, 1.05)
	btnGlow.Position = UDim2.fromScale(0.5, 0.5)
	btnGlow.AnchorPoint = Vector2.new(0.5, 0.5)
	btnGlow.BackgroundTransparency = 1
	btnGlow.Image = "rbxassetid://5028857084"
	btnGlow.ImageColor3 = COLORS.PRIMARY
	btnGlow.ImageTransparency = 1
	btnGlow.ScaleType = Enum.ScaleType.Slice
	btnGlow.SliceCenter = Rect.new(24, 24, 276, 276)
	btnGlow.ZIndex = 102
	
	changeBtn.MouseEnter:Connect(function()
		TweenService:Create(changeBtn, ANIM.SMOOTH, {
			BackgroundTransparency = 0,
			Size = UDim2.fromOffset(345, 64)
		}):Play()
		TweenService:Create(changeBtnStroke, ANIM.SMOOTH, {
			Transparency = 0.1,
			Color = COLORS.ACCENT
		}):Play()
		TweenService:Create(btnGlow, ANIM.SMOOTH, {ImageTransparency = 0.4}):Play()
	end)
	
	changeBtn.MouseLeave:Connect(function()
		if not configuringCycleHotkey then
			TweenService:Create(changeBtn, ANIM.SMOOTH, {
				BackgroundTransparency = 0.1,
				Size = UDim2.fromOffset(340, 60)
			}):Play()
			TweenService:Create(changeBtnStroke, ANIM.SMOOTH, {
				Transparency = 0.3,
				Color = COLORS.PRIMARY
			}):Play()
			TweenService:Create(btnGlow, ANIM.SMOOTH, {ImageTransparency = 1}):Play()
		end
	end)
	
	changeBtn.MouseButton1Click:Connect(function()
		if configuringCycleHotkey then return end
		
		configuringCycleHotkey = true
		changeBtn.Text = "‚åõ PRESS ANY KEY..."
		TweenService:Create(changeBtn, ANIM.SMOOTH, {BackgroundColor3 = COLORS.WARNING}):Play()
		TweenService:Create(changeBtnStroke, ANIM.SMOOTH, {Color = COLORS.WARNING}):Play()
		
		local connection
		connection = UserInputService.InputBegan:Connect(function(input, gameProcessed)
			if input.UserInputType == Enum.UserInputType.Keyboard then
				local keyCode = input.KeyCode
				
				-- Ignore system keys
				if keyCode ~= Enum.KeyCode.Unknown and 
				   keyCode ~= Enum.KeyCode.LeftShift and 
				   keyCode ~= Enum.KeyCode.RightShift and
				   keyCode ~= Enum.KeyCode.LeftControl and
				   keyCode ~= Enum.KeyCode.RightControl and
				   keyCode ~= Enum.KeyCode.LeftAlt and
				   keyCode ~= Enum.KeyCode.RightAlt then
					
					cycleHotkey = keyCode
					hotkeyText.Text = keyCode.Name
					saveCycleHotkey(keyCode)
					
					changeBtn.Text = "‚úÖ HOTKEY UPDATED!"
					TweenService:Create(changeBtn, ANIM.SMOOTH, {BackgroundColor3 = COLORS.SUCCESS}):Play()
					TweenService:Create(changeBtnStroke, ANIM.SMOOTH, {Color = COLORS.SUCCESS}):Play()
					
					-- Flash animation
					TweenService:Create(hotkeyDisplay, ANIM.INSTANT, {BackgroundTransparency = 0}):Play()
					TweenService:Create(displayStroke, ANIM.INSTANT, {Transparency = 0}):Play()
					task.wait(0.1)
					TweenService:Create(hotkeyDisplay, ANIM.SMOOTH, {BackgroundTransparency = 0.2}):Play()
					TweenService:Create(displayStroke, ANIM.SMOOTH, {Transparency = 0.3}):Play()
					
					task.wait(1.5)
					if changeBtn and changeBtn.Parent then
						changeBtn.Text = "üîÑ CHANGE HOTKEY"
						TweenService:Create(changeBtn, ANIM.SMOOTH, {BackgroundColor3 = COLORS.PRIMARY}):Play()
						TweenService:Create(changeBtnStroke, ANIM.SMOOTH, {Color = COLORS.PRIMARY}):Play()
					end
					
					configuringCycleHotkey = false
					connection:Disconnect()
				end
			end
		end)
	end)
	
	-- Info cards
	local infoCard1 = Instance.new("Frame", hotkeyContent)
	infoCard1.Size = UDim2.fromOffset(340, 90)
	infoCard1.Position = UDim2.fromOffset(0, 195)
	infoCard1.BackgroundColor3 = COLORS.BG_CARD
	infoCard1.BackgroundTransparency = 0.3
	infoCard1.BorderSizePixel = 0
	infoCard1.ZIndex = 103
	
	local info1Corner = Instance.new("UICorner", infoCard1)
	info1Corner.CornerRadius = UDim.new(0, 14)
	
	local info1Stroke = Instance.new("UIStroke", infoCard1)
	info1Stroke.Color = COLORS.SUCCESS
	info1Stroke.Thickness = 2
	info1Stroke.Transparency = 0.6
	
	local info1Icon = Instance.new("TextLabel", infoCard1)
	info1Icon.Size = UDim2.fromOffset(32, 32)
	info1Icon.Position = UDim2.fromOffset(10, 8)
	info1Icon.BackgroundTransparency = 1
	info1Icon.Text = "üëÜ"
	info1Icon.Font = Enum.Font.GothamBold
	info1Icon.TextSize = 24
	info1Icon.ZIndex = 104
	
	local info1Text = Instance.new("TextLabel", infoCard1)
	info1Text.Size = UDim2.fromOffset(290, 70)
	info1Text.Position = UDim2.fromOffset(45, 10)
	info1Text.BackgroundTransparency = 1
	info1Text.Text = "SINGLE PRESS\nCycles through markers 1‚Üíend"
	info1Text.Font = Enum.Font.Gotham
	info1Text.TextSize = 12
	info1Text.TextColor3 = COLORS.TEXT_MUTED
	info1Text.TextWrapped = true
	info1Text.TextXAlignment = Enum.TextXAlignment.Left
	info1Text.TextYAlignment = Enum.TextYAlignment.Top
	info1Text.ZIndex = 104
	
	local infoCard2 = Instance.new("Frame", hotkeyContent)
	infoCard2.Size = UDim2.fromOffset(340, 90)
	infoCard2.Position = UDim2.fromOffset(0, 295)
	infoCard2.BackgroundColor3 = COLORS.BG_CARD
	infoCard2.BackgroundTransparency = 0.3
	infoCard2.BorderSizePixel = 0
	infoCard2.ZIndex = 103
	
	local info2Corner = Instance.new("UICorner", infoCard2)
	info2Corner.CornerRadius = UDim.new(0, 14)
	
	local info2Stroke = Instance.new("UIStroke", infoCard2)
	info2Stroke.Color = COLORS.ACCENT
	info2Stroke.Thickness = 2
	info2Stroke.Transparency = 0.6
	
	local info2Icon = Instance.new("TextLabel", infoCard2)
	info2Icon.Size = UDim2.fromOffset(32, 32)
	info2Icon.Position = UDim2.fromOffset(10, 8)
	info2Icon.BackgroundTransparency = 1
	info2Icon.Text = "‚úä"
	info2Icon.Font = Enum.Font.GothamBold
	info2Icon.TextSize = 24
	info2Icon.ZIndex = 104
	
	local info2Text = Instance.new("TextLabel", infoCard2)
	info2Text.Size = UDim2.fromOffset(290, 70)
	info2Text.Position = UDim2.fromOffset(45, 10)
	info2Text.BackgroundTransparency = 1
	info2Text.Text = "HOLD KEY\nAuto-cycles 1‚Üíend, stops at last (0.2s delay)"
	info2Text.Font = Enum.Font.Gotham
	info2Text.TextSize = 12
	info2Text.TextColor3 = COLORS.TEXT_MUTED
	info2Text.TextWrapped = true
	info2Text.TextXAlignment = Enum.TextXAlignment.Left
	info2Text.TextYAlignment = Enum.TextYAlignment.Top
	info2Text.ZIndex = 104
	
	local infoCard3 = Instance.new("Frame", hotkeyContent)
	infoCard3.Size = UDim2.fromOffset(340, 70)
	infoCard3.Position = UDim2.fromOffset(0, 395)
	infoCard3.BackgroundColor3 = COLORS.BG_CARD
	infoCard3.BackgroundTransparency = 0.3
	infoCard3.BorderSizePixel = 0
	infoCard3.ZIndex = 103
	
	local info3Corner = Instance.new("UICorner", infoCard3)
	info3Corner.CornerRadius = UDim.new(0, 14)
	
	local info3Stroke = Instance.new("UIStroke", infoCard3)
	info3Stroke.Color = COLORS.PRIMARY_GLOW
	info3Stroke.Thickness = 2
	info3Stroke.Transparency = 0.6
	
	local info3Icon = Instance.new("TextLabel", infoCard3)
	info3Icon.Size = UDim2.fromOffset(32, 32)
	info3Icon.Position = UDim2.fromOffset(10, 8)
	info3Icon.BackgroundTransparency = 1
	info3Icon.Text = "‚ú®"
	info3Icon.Font = Enum.Font.GothamBold
	info3Icon.TextSize = 24
	info3Icon.ZIndex = 104
	
	local info3Text = Instance.new("TextLabel", infoCard3)
	info3Text.Size = UDim2.fromOffset(290, 50)
	info3Text.Position = UDim2.fromOffset(45, 10)
	info3Text.BackgroundTransparency = 1
	info3Text.Text = "BONUS: Flying Carpet auto-equips on TP!"
	info3Text.Font = Enum.Font.Gotham
	info3Text.TextSize = 12
	info3Text.TextColor3 = COLORS.TEXT_MUTED
	info3Text.TextWrapped = true
	info3Text.TextXAlignment = Enum.TextXAlignment.Left
	info3Text.TextYAlignment = Enum.TextYAlignment.Top
	info3Text.ZIndex = 104
	
	-- Initial list population
	refreshMarkerList()
	
	-- Animate open
	TweenService:Create(markerMenu, TweenInfo.new(0.6, Enum.EasingStyle.Back, Enum.EasingDirection.Out), {
		Size = UDim2.fromOffset(360, 650),
		Position = UDim2.new(1, -380, 0.5, -325)
	}):Play()
end

-- Load saved hotkey on startup
loadCycleHotkey()

-- Create TP Steal card in Steal section (single card, hotkey is now a tab inside)
local tpStealCard, tpStealBtn = createActionCard(
	"TP MARKERS",
	"Place markers, configure hotkey, and teleport instantly",
	"üìç",
	stealContent,
	function(btn)
		if markerMenuOpen then
			if markerMenu then
				TweenService:Create(markerMenu, ANIM.SMOOTH, {
					Position = UDim2.new(1, 50, 0.5, -325),
					Size = UDim2.fromOffset(0, 650)
				}):Play()
				task.wait(0.4)
				markerMenu:Destroy()
				markerMenu = nil
				markerListFrame = nil
				counterText = nil
			end
			markerMenuOpen = false
			btn.Text = "‚ñ∂"
		else
			createMarkerMenu()
			markerMenuOpen = true
			btn.Text = "‚óÄ"
		end
	end
)

print("‚úÖ TP Steal section complete - FLYING CARPET AUTO-EQUIP!")
print("üìç Features: Auto-equips Flying Carpet, always cycles 1‚Üíend!")
print("üîÑ Default cycle hotkey: " .. cycleHotkey.Name)
print("‚ö° Hold delay: 0.2s | Always goes forward: 1, 2, 3... to end!")

